
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alexander Beletsky's development blog</title>
  <meta name="author" content="Alexander Beletsky">

  
  <meta name="description" content="How do I seek for knowledge? Apr 8th, 2011 Reading, Social, Tips Developers job is nothing more than other engineers specialties except one big &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alexanderbeletsky.github.io/blog/page/13/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/fontello.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/pure-min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alexander Beletsky's development blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>

  

</head>


<body>
	<header class="pure-g-r"><div class="pure-g-r">
	<div class="inner pure-u-1">
		<h4 class="light">Alexander Beletsky's development blog</h4>
		<h1>My profession is engineering</h1>
		<nav role="navigation" class="pure-menu pure-menu-open pure-menu-horizontal"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/talks">Talks</a></li>
	<li><a href="/blog/archives">Archive</a></li>
	<li><a href="/about">About me</a></li>
</ul>

</nav>
	</div>
</div>

</header>
	<div class="social inner pure-menu-horizontal"><ul>
	<li><a class="twitter icon-twitter" href="http://twitter.com/alexbeletsky"></a></li>
	<li><a class="github icon-github-circled" href="https://github.com/alexanderbeletsky"></a></li>
	<li><a class="stackoverflow icon-stackoverflow" href="http://stackoverflow.com/users/386751/alexanderb"></a></li>
	<li><a class="rss icon-rss" href="http://feeds.feedburner.com/abeletskyblog"></a></li>
</ul>
</div>
	<div id="content" class="inner pure-g-r"><div class="blog-index">
  
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/how-do-i-seek-for-knowledge.html">
    
      How do I seek for knowledge?</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-08T18:30:00+03:00" pubdate data-updated="true">Apr 8<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/reading/'>Reading</a>, <a class='category' href='/blog/categories/social/'>Social</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Developers job is nothing more than other engineers specialties except one big difference. Technologies we are using are changing very fast and to feel confidence in daily work you have to be up-to-date with latest changes in development world. That&#8217;s why I usually ask people &#8220;How do you seek for knowledge?&#8221;, &#8220;How you sure you up-to-date?&#8221;. And today I gonna share my primary sources of information.
</p>
<h2>Blogs</h2>
<p>
I&#8217;ve started actively follow blogs several years ago. Followed any blog I met with useful information (usually by googling for some problem and found the answer). I did know nothing about authors, but after much reading I feel like I know them personally and many of them are actually very famous developers :). Through years I filtered out a lot, so now I look closer to:
</p>
<ul>
<li>
<a href="http://weblogs.asp.net/scottgu/default.aspx">http://weblogs.asp.net/scottgu/default.aspx</a> - Scott Guthrie is a VP of Microsoft, so all major .NET announcements going from there. Scott does share a lot of examples of &#8220;how-to-use&#8221; some new technology or given very useful links for other resources. Primary source of information for any .NET developer.
</li>
<li>
<a href="http://www.hanselman.com/blog/">http://www.hanselman.com/blog/</a> - Scott Hanselman probably one of the most famous .NET guys from Microsoft. He is guru of technology, sharing a lot of interesting stuff in his blog.  
</li>
<li>
<a href="http://haacked.com/">http://haacked.com/</a> - Phil Haack is Program Manager in Microsoft, in particular responsible for ASP.net MVC framework (that I love really much). He is also managing the project that changed .NET world much - <a hfef="http://nuget.codeplex.com/">NuGet</a> and currently he describes a lot from this area in his blog. I also like Phil&#8217;s posts on <a href="http://haacked.com/tags/TDD/default.aspx">TDD</a> and <a href="http://haacked.com/tags/Open%20Source/default.aspx">Open Source</a> projects.
</li>
<li>
<a href="http://wekeroad.com/">http://wekeroad.com/</a> - Rob Conery is very famous with his latest start-up project <a href="http://tekpub.com/">Tekpub</a> and a bunch of other open sources projects. He has one of the most interesting blogs I ever follow. I share many ideas Rob has on development and practices.
</li>
<li>
<a href="http://blog.stevensanderson.com/">http://blog.stevensanderson.com/</a> - Steve Sanderson, is author of the briliant <a href="http://www.amazon.com/dp/1430228865?tag=stesansblo-20&camp=213381&creative=390973&linkCode=as4&creativeASIN=1430228865&adid=0N6ZY1MKSBV6N16NZNM9&">MVC2 book</a> that I highly recommend to read. He is author of <a href="http://knockoutjs.com/">Knockout.js</a> javascript MVVP framework and his recent posts aimed to it. 
</li>
<li>
<a href="http://odetocode.com/Blogs/scott/default.aspx">http://odetocode.com/Blogs/scott/default.aspx</a> - K. Scott Allen blogging for many years from now, so his blog is full of useful info. 
</li>
<li>
<a href="http://hackingon.net/">http://hackingon.net/</a> - Liam McCleanan is primary .NET developer with a lof of using of Javascript, so he shares knowledge in both areas.
</li>
<li>
<a href="http://osherove.com/">http://osherove.com/</a> - Roy Osherove blogs a lot about TDD and Agile software development, he is famous with his book about TDD <a href="http://www.manning.com/osherove/">Art of Unit Testing</a> and his <a href="http://osherove.com/tdd-kata-1/">TDD String Calculator</a> kata.
</li>
</ul>
<p>
That&#8217;s a small percentage of all my reading, but I think that is major ones.
</p>
<p>
I use Google Reader to track my RSS subscriptions, seems best choice as for me. I try to check reader at least 2 times per week, but in reality it could be even rare.  
</p>
<h2>Videos / Screencasts</h2>
<p>
With better internet channels video became even more better source of knowledge. Learning from videos is much more productive than reading blogs and books, as for me. There are a lot of free videos that could help you to start up with new technology. Advanced videos are typically paid, but price are affordable and price / value ratio is very low. 
</p>
<ul>
<li>
<a href="http://www.asp.net/">http://www.asp.net/</a> - This actually main source of information of ASP.net developers, tons of videos, blog posts, articles. I reviewed mostly all of ASP.net WebForms then I was learning it.. and some of ASP.net MVC as well. All videos are free that make this recourse priceless :).
</li>
<li>
<a href="http://tekpub.com/">http://tekpub.com/</a> - Tekpub is great for .NET/Ruby developers. There are free and paid videos. I had a chance to watch both and they are superb.
</li>
</ul>
<h2>Social networks</h2>
<p>
If you think that social networks are only for schoolgirls or people who had nothing to do.. you are right :). But there some social network that really help professional growth.
</p>
<ul>
<li>
<a href="http://stackoverflow.com/">http://stackoverflow.com/</a> - StackOverflow is best of the best of the best QnA site for developers. It allows you to create <a href="http://stackoverflow.com/users/386751/alexanderb">account</a> ask questions and help other people with answering questions. It has huge popularity because of rating system, as much correct answers you do, as much rating you have.. such simple and good idea that force other people to provide a quality answers :). I like StackOverflow very much and post my questions that I lost hope of getting answer by trying and googling. In 95% I got very precise answers. 
</li>
<li>
<a href="http://github.com/">http://github.com</a> - Best place for hosting open sources projects. Besides hosting the code, it is a true social network. You can use github for <a href="http://www.beletsky.net/2010/07/github-social-coding.html">social coding</a>. Recently I recieved my first pull request, believe me it is good feeling :). As bonus you can get such looking good <a href="http://resume.github.com/?alexanderbeletsky">CV</a>.
</li>
<li>
<a href="http://twitter.com/">http://twitter.com/</a> - I tried to avoid twitter as much as I can, but twitter won :).. Now I really feel power of it. If you follow right people, being polite but not tweeting to much you are on right way. This is probably my main source of information now, RSS slowly moving behind the scene and twitter became main information distribution system. (btw, if you read this line follow me <a href="http://twitter.com/#!/alexbeletsky">@alexbeletsky</a> :).
</li>
</ul>
<h2>Podcasts</h2>
<p>
I recently opened podcasts power for myself. I spend at least several hours walking dog or driving car with no value :). Podcasts help you to feel that gap. Stuff that I like the most:
</p>
<ul>
<li>
<a href="http://pragprog.com/podcasts">http://pragprog.com/podcasts</a> - Progmatic Podcasts. <a href="http://pragprog.com">http://pragprog.com</a> is itself very useful recourse.. podcasts are free and extremely interesting. Highly recommended. 
</li>
<li>
<a href="http://www.dotnetrocks.com/">http://www.dotnetrocks.com/</a> - .NET Rocks, is greatest .NET technology stack podcast. 
</li>
<li>
<a href="http://herdingcode.com/">http://herdingcode.com/</a> - Herding Code, very different topics, very great guests. Best for geeks.
</li>
<li>
<a href="http://thisdeveloperslife.com/">http://thisdeveloperslife.com/</a> - This Developers Life is run by Rob Conery and Scott Hanselman is less technical, more philosophical podcast that&#8217;s nice to listen just to relax and understand what developers from other side of planet think.
</li>
</ul>
<p>
Picking a little bit from every source of information make you more comfortable in our fast changing world :).. If you know some great resources that you like, please share as comments.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/03/aspnet-developers-disease.html">
    
      ASP.NET developers disease</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-03-22T14:06:00+02:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>Life</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
We are trying to hire web developer with using of Microsoft technology stack of ASP.net/C#/WebForm/MVC etc. So, I do a lot of interviews nowadays and I found out interesting fact. I&#8217;ve noticed symptoms of disease many of many ASP.net guys suffer from. The people who spent a lot of time with WebForms do not really understand web.
</p>
<p>
Originally WebForms has been designed in perspective to be conveniently used by Visual Basic developers. Ones who created UI in designers and put logic of application into control event handlers methods. That was a good idea because that gave possibility to many people switch to web world, without too much 
    harm their own world of Windows programming (controls, events, handlers). That worked great, because all you have to understand is Page Lifecycle, be aware of controls that Microsoft created for you and be able to drag the control in WYSIWYG editor. The application created in this way was mostly fine, because it was to far to Web 2.0, AJAX, CSS and HTML revolutions.
</p>
<p>
Time has passed. Web stepped far away from a <code>form</code> with <code>submit</code> button and tables for everything, into rich UI applications with complex client side code, styled up with CSS. WebForms issues appeared really seriously, because it too much abstracted you from &#8220;what is actually going on&#8221;. WebForms controls generated HTML for you, did a server side validation. You could tweak a bit of CSS on server side as well. But this is a not controlling of your application, but rather adapting to &#8220;old-school&#8221; type of web development with ASP.net. With such level of abstraction you were loosing many important things.
</p>
<p>
I&#8217;m not saying the WebForms is bad. I&#8217;m saying that WebForms did a bad joke for the people who do not try to see bit far from their nose. If you open your eyes you would see how much web development is far from ASP.net WebForms development. Modern web development is actually started on client side. You have to understand HTML/JS really fine to be efficient in it. You might not be a designer, but you have to be able to style up your HTML from UI mock in PSD. You should understand REST and AJAX to make go from web page to web application. And the issue is - the most ASP.net developers do not know these things. They think that knowing a C# or VB.net is much OK for creation of web application and the rest is work for front-end developers. 
</p>
<p>
Guys, seriously.. If you think: &#8220;HTML is easy, I could do learn in 5 mins&#8221;, &#8220;CSS is nothing to do..&#8221;, &#8220;I don&#8217;t want to do javascript&#8221; - you have those symptoms. Please try to markup the page that might look like <a href="http://onehub.com/">that</a>, enchase it with CSS3 transitions and shadows. Try to use jQuery for handling UI. You will see it is not easy at all. And basically your knowledge on C# does not make help you. I would say, it might be even harder than you application server side. Knowing how to do things with WebForms is great, but you should not be only limited to WebForms.
</p>
<p>
So, if your CV says you are <i>web developer</i>, please make sure that your are really able to do <i>web products</i>. Do not limit your self to &#8220;client-side&#8221; or &#8220;server-side&#8221; developer, it does not work any more. Be universal, look for the same things in a different angles, that helps sometimes. 
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/03/best-day-in-developers-life.html">
    
      The best day in developer&#8217;s life</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-03-16T21:27:00+02:00" pubdate data-updated="true">Mar 16<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>Life</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
What would you think is best day in developers life? First day of work, last one? Salary or bonuses payment day? All of those are pretty nice, indeed. But I think best day in developers life is day of Release. It is exactly the time than the code you created recently is being pushed out to production and customers are able to see what changes you&#8217;ve done so far. Release makes a really good feeling of &#8220;work is done&#8221;. In reality, of cause, work is not stopped but only begins after release date - production issues, customer reports, change requests.. all of these still need to be handled.
</p>
<p>
Releasing a product is big job. And it is not all about coding. First of all it is well coordinated effort of all groups - Development, QA, Documentation, Product Owners, Stakeholders etc. I&#8217;ve seen situations than products that could be potentially released just stuck on a line, because of lack of coordination. Here the team atmosphere plays important role. If team sees the goal, agreed on method and tools and communicated well it is a big step to success.  
</p>
<p>
Yesterday, Report Designer product that is part of <a href="http://e-conomic.com">E-conomic</a> has been released. It took about an year to make this happen. Huge amount of work were done, many lessons learned. We&#8217;ve passed long way from Specification till Integration code to main branch. I personally that it was just too long. With current experience I see a lot of value in frequent releases, so I tend to just-in-time production practices as <a href="http://en.wikipedia.org/wiki/Kanban">Kanban</a>. I world of web products, feedback is extremely fast and cost of defect is not so high, comparing to desktop. 
</p>
<p>
It is good time to exhale, inhale fresh air and self-motivate for next interesting projects. We are now looking forward to make a better codebase, better processes and better products as result. Let&#8217;s start new adventure!
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/03/clean-tests-with-sharptestsex.html">
    
      Clean tests with SharpTestsEx</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-03-12T10:25:00+02:00" pubdate data-updated="true">Mar 12<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/clean-code/'>Clean Code</a>, <a class='category' href='/blog/categories/open-source/'>Open source</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
I was recently been adding NUnit to one of mine project&#8217;s and noticed one interesting framework in <a href="http://nuget.codeplex.com/">Nuget</a> channel. It is <a href="http://sharptestex.codeplex.com/">SharpTestsEx</a> by <a href="http://twitter.com/#!/fabiomaulo">Fabio Maulo</a> and its primary goal is to make your assertions shorter, cleaner and easy to read.
</p>
To start with, it is just enough to install it through Nuget (or manually) and add using statement in your test class file.
<p>
<pre class="brush: csharp">
using SharpTestsEx;
</pre>
<p>
SharpTestsEx would add number of <code>Should()</code> extension methods. Suppose you have such case:
</p>
<pre class="brush: csharp">
[Test]
public void Compile_Div_EmptyDivElement()
{
    // arrange
    var compiler = new Compiler();

    // act
    var result = compiler.Compile("div");

    // assert
    Assert.That(result, Is.Equal("&lt;div&gt;&lt;/div&gt;"), "expected and actual results are different");
}
</pre>
<p>
With SharpTestsEx I&#8217;m changing assert part of test to,
</p>
<pre class="brush: csharp">
[Test]
public void Compile_Div_EmptyDivElement()
{
    // arrange
    var compiler = new Compiler();

    // act
    var result = compiler.Compile("div");

    // assert
    result.Should().Be.EqualTo("&lt;div&gt;&lt;/div&gt;");
}
</pre>
<p>
Note, it is much shorter and mostly plain English sentence: <i>result should be equal to something</i>.. The assertion message for this test is really clean and sufficient, so you mostly won&#8217;t needed and custom messages.
</p>
<p>
If I go further and implement extension method for this <code>Compile</code> method:
</p>
<pre class="brush: csharp">
static class CompilerTestExtension
{
    public static string Compile(this string expression)
    {
        var c = new Compiler();
        return —Å.Compile(expression);
    }
}
</pre>
<p>
My tests case would be just one line of code:
<pre class="brush: csharp">
[Test]
public void Compile_Div_EmptyDivElement()
{
    // arrange / act / assert
    "div".Compile().Should().Be.EqualTo("&lt;div&gt;&lt;/div&gt;");
}
</pre>
<p>
This is very short and clean notation of test case, even not technical person could read this. You can do more complicated assertions, combining them by <code>And</code> / <code>Not</code> conditions. There are also bunch of useful extensions for strings, sequences.
</p>
</p>
Additional information on project <a href="http://sharptestex.codeplex.com/">site</a> as well as author <a href="http://fabiomaulo.blogspot.com/search/label/SharpTestEx">blog</a>.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/03/my-first-year-in-company.html">
    
      My first year in company</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-03-10T10:02:00+02:00" pubdate data-updated="true">Mar 10<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>Life</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
It is exactly one year since I joined <a href="http://e-conomic.com">E-conomic</a> company. Last year I decided to switch the jobs and now I realize how much right decision it was. I got invitation on interview to <a href="http://e-conomic.com">E-conomic</a> where I did a small test application and presented it to management and technical guys (hi Jakob, Chistian). I had no great experience with ASP.net that time, since last years of my career I spent mostly on management tasks. Really, I just reviewed the code that I created year ago and I see it was not so good :). Fortunately, those guys believed that I could bring a value and offer me a job. Since then I try to do my best to proof - you were not wrong.
</p>
<p>
I see work in company as kind of mariage. Indeed, to feel happy in marriage you should have really strong match and level of trust to each other. Probably it is <a href="http://e-conomic.com">E-conomic</a> where I first time understood how important trust between development and management. I forgot what the &#8220;estimation negotiation&#8221;, I forgot the problems with unrealistic project plans created by management and business guys. A lot of problems that only created conflicts on my previous jobs here done in very smooth way.  
</p>
<p>
We are developer-centric company. Developers have power here, developers take a decisions, developers do the job. But <a href="http://en.wikipedia.org/wiki/Uncle_Ben">with great power comes great responsibility</a>. Developers are totally responsible for product quality. Here I saw a new model, not &#8220;Software Developer&#8221; but rather &#8220;Product Developer&#8221;.. Product developers job is not ended on coding and integration changes, but it is more for verification, configuration management and release. We don&#8217;t have testers here, but we have QA. And developers are part of QA also.
</p>
<p>
I enjoy the environment here very much. Even we are highly distributed team I feel the shoulder of each team mate. We working closer, doesn&#8217;t matter we are sitting &gt;1000 km from each other. That was not so fast to get used to work like that, but now I have no problems at all. I really think that I&#8217;m part of the rest of team who mainly located in Copenhagen. This environment constantly inspires: I was happy to restore my blog (that I created in 2008, but then froze it), I do a lot of reading to understand modern web development, I <a href="http://www.beletsky.net/2010/11/ive-release-my-own-product-trackytnet.html">released</a> my small product.. and have bunch of new ideas and feel only lack of time to work on all of them :).  
</p>
<p>
I would also say that <a href="http://www.ciklum.net/">Ciklum</a> as Ukrainian representative does job very well. Basically 2 major things that I see Ciklum is great: it handles all infrastructure and finance very professional and does not interfere to work directly with client. If I have some kind of problem I know Ciklum would solve it, this is also good level of trust and I appreciate that. 
</p>
<p>
Yes, I&#8217;m just happy developer now. And I really much correlate this with <a href="http://e-conomic.com">E-conomic</a>. Last year decision changed my life. I think I found the place where I like to work, even if I spend more than 7 years for that.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/03/integrating-elmah-to-aspnet-mvc-in.html">
    
      Integrating ELMAH to ASP.NET MVC in right way</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-03-05T19:36:00+02:00" pubdate data-updated="true">Mar 5<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/elmah-dot-mvc/'>ELMAH.MVC</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p><small> I&#8217;ve received great feedback on this article. Thanks all of you guys, who provided valuable comments and pull requests on github. I edited the article several time, hope its up-to-date now. You can go directly to <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">code repository</a> and get the test application, to see what it is all about. In case if you having some issues, just let me know. </small> </p><p style="color: red"><strong>UPDATE:</strong> Elmah.MVC is now <a href="http://www.beletsky.net/2011/08/elmah-mvc-controller-released-on-nuget.html">released</a> as NuGet package. No need to read that long blog post, just install it.  <p>Many of you know what the ELMAH is. If you still don&#8217;t, go and read <a href="http://code.google.com/p/elmah/">here</a>. If you care about monitoring and stability of your web application, you definitely consider to integrate ELMAH. There are number of guidelines of how to do that. But all of them do not answer several question that MVC developers really concerned about: </p><ul><li> How to add ELMAH as usual MVC controller? </li>
<li> How to add ELMAH handler to make it secure (accessible only by authorized users) in MVC application? </li>
</ul><p>I&#8217;ll shed the light on both questions here. </p><h2>Quick start up </h2><p>The best way to add ELMAH is to use <a href="http://nuget.codeplex.com/">Nuget</a> package manager (really recommend to install it). I&#8217;m using Nuget UI, so just right click on MVC application, select <i>&#8220;Add Library Package Reference</i> and pickup ELMAH from nuget feed. Nuget will add reference and update <code>web.config</code> with all required configuration. Basically you can start you application with <code>http://localhost/yourapp/elmah.asx</code> and see main ELMAH page. </p><h2>Changing the configuration </h2><p>ELMAH have been developed in ancient history times of Web Forms. And it is nicely done to be as much universal as possible and implemented as HttpHandler. In <code>web.config</code> you have several line of configuration that register this handler. This is of cause works, but URI like this <code>http://localhost/yourapp/elmah.asx</code> is absolutely not MVC way. So, what you have to do is simply comment out those configuration. </p><pre class="brush: xml">&lt;system.web&gt;

        &lt;!--&lt;httpHandlers&gt;
            &lt;add verb=&quot;POST,GET,HEAD&quot; path=&quot;elmah.axd&quot; type=&quot;Elmah.ErrorLogPageFactory, Elmah&quot; /&gt;
        &lt;/httpHandlers&gt;--&gt;
  
    &lt;/system.web&gt;

&lt;system.webServer&gt;

    &lt;!--&lt;handlers&gt;
    &lt;remove name=&quot;Wild&quot; /&gt;
    &lt;add name=&quot;Elmah&quot; verb=&quot;POST,GET,HEAD&quot; path=&quot;elmah.axd&quot; type=&quot;Elmah.ErrorLogPageFactory, Elmah&quot; /&gt;
    &lt;/handlers&gt;--&gt;
 
&lt;/system.webServer&gt;
</pre><h2>Add ELMAH controller </h2><p>Now add ELMAH controller to application, the code of controller is: </p><pre class="brush: csharp">public class ElmahController : Controller
{
    public ActionResult Index(string type)
    {
        return new ElmahResult(type);
    }
}
</pre><p>And setup a proper routing for it: </p><pre class="brush: csharp">context.MapRoute(
    "Admin_elmah",
    "Admin/elmah/{type}",
    new { action = "Index", controller = "Elmah", type = UrlParameter.Optional }
);
</pre><h2>Implementation of ElmahResult action result </h2><p>He we go for most interesting part. I&#8217;ve checked the sources of ELMAH and reused <code>Elmah.ErrorLogPageFactory</code> to handle those custom HTTP request. After several modifications and pull request by <a href="https://github.com/seba-i">seba-i</a> the code is: </p><pre class="brush: csharp">class ElmahResult : ActionResult
{
    private string _resouceType;

    public ElmahResult(string resouceType)
    {
        _resouceType = resouceType;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var factory = new Elmah.ErrorLogPageFactory();

        if (!string.IsNullOrEmpty(_resouceType)) {
            var pathInfo = "." + _resouceType;
            HttpContext.Current.RewritePath(PathForStylesheet(), pathInfo, HttpContext.Current.Request.QueryString.ToString());
        }

        var httpHandler = factory.GetHandler(HttpContext.Current, null, null, null);
        httpHandler.ProcessRequest(HttpContext.Current);
    }

    private string PathForStylesheet() 
    {
        return _resouceType != "stylesheet" ? HttpContext.Current.Request.Path.Replace(String.Format("/{0}", _resouceType), string.Empty) : HttpContext.Current.Request.Path;
    }
}
</pre><h2>Try it now </h2><p>Just build the application and put <code>http://localhost/yourapp/admin/elmah</code> and you will get nice looking ELMAH main page. </p><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/-4zN-4tT3uVQ/TXJ0td3aMhI/AAAAAAAAHUs/i9qSfE3rG3w/s1600/screen.png"><img style="cursor:pointer; cursor:hand;width: 400px; height: 225px;" src="http://4.bp.blogspot.com/-4zN-4tT3uVQ/TXJ0td3aMhI/AAAAAAAAHUs/i9qSfE3rG3w/s400/screen.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5580651212725432850" /></a> <h2>Making it secure </h2><p><a href="http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx">AuthorizeAttribute</a> works great for this purpose. Just put this attribute to <code>ElmahController</code> and now it is only Admin, who has access to it.  </p><pre class="brush: csharp">[Authorize(Users = "Admin")]
public class ElmahController : Controller
{
    // ...
</pre><p>In my applications I use a custom attribute, but the idea still the same.  </p><h2>Allow to view results remotely </h2><p>You definitely want to see results remotely, with no need to access hosting machine. By default, ELMAH do not allow this, but it is easily changed in configuration: </p><pre class="brush: xml">&lt;elmah&gt;
  &lt;security allowRemoteAccess=&quot;yes&quot; /&gt;
</pre><h2>Code example </h2><p>Full code example is located in my github repository <a href="https://github.com/alexanderbeletsky/trackyt.net/blob/master/src/Web/Areas/Admin/Controllers/ElmahController.cs">here</a>. </p><br />
<h2>UPD:</h2><p>I&#8217;ve moved out controller to separate github repostitory. You are free and very welcome to use/fork/pull changes :). Fork & fix it here - <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">https://github.com/alexanderbeletsky/elmah.mvc.controller</a>. </p><h2>UPD2:</h2><p>Instead of placing just controller I create test MVC3 application that clearly show how to use Elmah in MVC. Plese check code and README  <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">here</a>. </p><h2>UPD3:</h2><p>Code placed in this blog post has been changed drastically by latest feedback I recieved for this controller. Please better refer code on github or latest blog post here <a href="http://www.beletsky.net/2011/08/latest-version-of-elmah-mvc-controller.html">Latest version of ELMAH MVC controller</a> </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/02/seleniumcamp-conference-in-kiev.html">
    
      SeleniumCamp conference in Kiev</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-02-28T14:56:00+02:00" pubdate data-updated="true">Feb 28<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
I had a chance to be present on a <a href="http://seleniumcamp.com/">SeleniumCamp</a> conference that took place 26 of February. It was first Selenium dedicated conference in a <a href="http://seleniumcamp.com/about/">world</a>, so it was bad idea to miss it. Moreover, my colleague from Dnepropetrovsk <a href="http://samarskyy.blogspot.com/">Anton</a> was coming there also, so we had a good time to meet each other again. 
</p>
<p>
Event has been organized by <a href="http://xpinjection.com/">Xp Injection</a> group. I&#8217;ve been <a href="http://www.beletsky.net/2010/10/agileee-2010-mikalai-alimenkau-aleksey.html">listen</a> those guys last year on Agileee, I also read their blog from time to time, so I was pretty confident of what is going be all about. Event took place in Bratislava hotel. Here is a brief summary of stuff I heard there:
</p>
<ul>
<li>
<a href="http://seleniumcamp.com/speakers/#burns">David Burns</a> was the one who did open speech. He is Senior Software Engineer in Test at Mozilla working as the Automation Lead in WebQA and one of Selenium Core commiter. David was describing Selenium 2 and <a href="http://google-opensource.blogspot.com/2009/05/introducing-webdriver.html">WebDriver</a> ideas as primary part on Selenium 2 framework. In spite of Selenium RC, Web driver: 
    <ul>
        <li>Uses native browser API, so works much more faster</li>
        <li>Reduces and clear API</li>
        <li>More reliable</li>
    </ul>
    It means that WebDrivers should be tool of choice for functional testing in nearest future. As far as I get Selenium 2 is not officially release and currently in Beta phase.
</li>
<li>
<a href="http://twitter.com/#!/f0g">Kirill Klimov</a> did an speech about his experience of deployment Selemium in company. He shared some pros and cons of each Selenium umbrella products: from Core to Grid. They stated to use Selenium from IDE, seems the most easy scenario of using functional tests. Then they switched to Core and RC. Kirill has very good understanding of &#8220;what&#8217;s going on&#8221; and summaries speech with several recommendations I think very useful:
    <ul>
    <li>
        Don&#8217;t be hurry to start up
    </li>
    <li>
        Understand the difference in tools and pick up right one
    </li>
    <li>
        Try to elaborate in several years perspective
    </li>
    </ul>
    Slides from his presentation is <a href="http://www.slideshare.net/f0g/selenium-guide">here</a>
</li>
<li>
    <a href="http://twitter.com/#!/mairbek">Mairbek Khadikov</a> shared his own vision of web applications testing automation. Through 2 years of usage Selenium they came up with bunch of tests and realized the power of automation. Most important that value shared between business and development. He touch such important issues as performance, tests isolations. It is very important to write tests that might be read 
    by non-technical guys. In such case tests starting to be a part of project documentation and used not only be development team. He also noticed that test should be architecture to be run in parallel as early as possible, it is just matter of time then you going to run tests by Grid (for instance) and you will meet a problem. He did several examples of Tests written on Java, so developers had a little fun to see the code. His presentation is stored <a href="http://www.slideshare.net/mairbek/ss-7079843">here</a>.
</li>
<li>
    <a href="http://twitter.com/#!/twincengray">Alexey Rezhchikov</a> did one of the most impressive speech as for me. He works on huge and high complexity project(s) for Ebay Motors (as far as I got). They are dealing with complex requirements, multicultural, high loaded sites with difficult configuration management. He clearly described problems any big project meet in a way towards Release. Nevertheless, they&#8217;ve implemented and successfully using solution stack based on Selenium platform (not only). Using different level of testing to meet acceptance goal, they are very flexible in decision &#8220;go or not to go with automated test&#8221; and &#8220;what kind of test is OK for this particular scenario&#8221;. I also bit impressed by usage a <a href="http://code.flickr.com/blog/2009/12/02/flipping-out/">Feature Flags</a> as opposite way of multibranch development. . His presentation <a href="http://slidesha.re/f3uMra">here</a>.
</li>
<li>
    <a href="http://twitter.com/#!/xpinjection">Nikolai Alimenkov</a> was selling ideas of using Wiki as &#8220;live&#8221; requirements. The whole approach back us to Fitnesse ideas of keeping requirements in a Wiki-style storage, placing acceptance conditions into to tables and &#8220;somehow&#8221; run Fitnesse tests against target applications. With my big respect to <a href="http://en.wikipedia.org/wiki/Robert_Cecil_Martin">Robet C. Martin</a>, original developer of Fitnesse, I don&#8217;t believe that stuff works. I don&#8217;t believe that Product Owner will ever work with requirements in Wiki will run them. Moreover, it seems a big overhead to me to support all that wiki&#8217;s in up-to-date in world of changing requirements. Nikolai showed Fitnesse based tools as Fitnium, Selenesse and some tests examples but it was to artificial to me. You can find his presentation <a href="http://www.slideshare.net/alimenkou/selenium-wiki-executable-specification">here</a>.
</li>
<li>
    <a href="http://automated-testing.info/users/kanon">Nikolai Kolesnik</a> seems to have a good plan to describe BDD, but was quite nervous and shy that interfered him to make a good speech. Nevertheless, he expressed his understanding and application of BDD for real projects, pitfals and solutions based on Selenium RC. You can find his presentation <a href="http://www.slideshare.net/kolesnik_nickolay/bdd-approach-with-selenium-rc">here</a>. 
</li>
</ul>
<p>
In short, I enjoyed the conference.. but I would not say it is something I expected. Most speeches I visited, was a kind of &#8220;too many word&#8217;s, too few real examples&#8221;. Guys, please if you are talking about product for developers - <strong>show me the code</strong>. All the idea&#8217;s of ATDD, BDD, Acceptance testing, Wiki are requirements are already <strong>sold</strong> years ago, don&#8217;t do the job that is already done. But, show some your projects, show real test cases, show examples. 
</p>
<p>
I would like to THANK my <a href="http://e-conomic.com">company</a> who make it possible to me to visit this conference.
</p>
<p>
PS. for foreign guys: Bratislava hotel is very cold, avoid it to stay on winter time :).
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/02/github-commits-activity-widget.html">
    
      Github commits activity widget</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-02-26T13:43:00+02:00" pubdate data-updated="true">Feb 26<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/github/'>GitHub</a>, <a class='category' href='/blog/categories/open-source/'>Open source</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
The most important factor about each open source project is how much community is active around this project. It is good to understand the factor. One of the indicators of activity is of cause commits to repository. You probably want to demonstrate how much active your project is by placing some information on a web site. 
</p>
<p>
Having this idea on my mind I created <code>github.commits.widget</code>, small javascript that could be easily integrated to your website and show something like this:
</p>
<div id="github-commits" style="border: 1px solid grey; padding: 5px; list-style: none"></div>
<p>
Note, it is not just html pasted.. but widget added to this blog post.
</p>
<p>
The code is really simple for that:
</p>
<pre class="brush: html">
&lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;github.commits.widget-min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
    $(function () {
        $('#github-commits').githubInfoWidget(
      { user: 'alexanderbeletsky', repo: 'github.commits.widget', branch: 'master', last: 5 });
    });
&lt;/script&gt;  
</pre>
<p>
To configure all you need to do: specify your github account, repository and branch to watch. For more documenation, please visit <a href="https://github.com/alexanderbeletsky/github.commits.widget">project page</a>. If you like it and want to use it on your website, you are very welcome to do it! Please just give a little feedback to either by <a href="https://github.com/alexanderbeletsky">github</a>, <a href="http://twitter.com/#!/alexbeletsky">twitter</a> or <a href="mailto:alexander.beletsky@gmail.com">mail</a>.
</p>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
<script src="https://github.com/alexanderbeletsky/github.commits.widget/raw/master/js/github.commits.widget-min.js"></script>
<script>
    $(function () {
        $('#github-commits').githubInfoWidget(
  { user: 'alexanderbeletsky', repo: 'github.commits.widget', branch: 'master', last: 5 });
    });
</script></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/02/implementation-of-rest-web-service.html">
    
      Implementation of REST web service adapter on .NET</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-02-24T14:58:00+02:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/github/'>GitHub</a>, <a class='category' href='/blog/categories/rest/'>REST</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
The REST web services are quite common thing nowadays. Sure, web application just expose API through HTTP protocol, basically allowing any application to be integrated with. Simple? Yes, this is the power of REST, just simple. But vendor should consume the API somehow. The environment could really be different: .NET, Java, Python, PHP etc., and it it not so convenient to work with HTTP directly from your custom application. Instead of that you expect on &#8220;native&#8221; API that you work with like the rest of application: having a model, methods that returns of change model state. You expect on having <code>Adapter</code> - the entity which would adapt REST HTTP methods into your platform/language methods. I&#8217;m going to give example of creation such adapter for .NET code.
</p>
<p>
Doesn&#8217;t matter what language you write it the steps of adapting is quite common, here they are:
</p>
<h2>Learn the API</h2>
<p>
Let&#8217;s have <a href="http://www.trackyt.net/Home/ApiV11">Trackyt.net API</a> as an example. First thing you need to do is to learn API. REST API differs much from site to site, depending of developers tools and choice. All you need to understand the exact methods you need, their signature and data they operate with. Let&#8217;s take <code>Authenticate</code> method: so we see, it takes 2 arguments, email and password and in response it returns JSON object, containing operation result and API token. That means:
</p>
<pre class="brush: plain">
URL: http://trackyt.net/api/v1.1/authenticate
</pre>
<p>
Will be transformed in such C# method, like <code>Authenticate</code> that receives email and password as arguments and return ApiToken as results. Note, <code>ApiToken</code> is first model class we identified.
</p>
<p>
And call like this:
</p>
<pre class="brush: plain">
http://trackyt.net/api/v1.1/af005f695d300d0dfebbd574a4b1c0fa/tasks/all
</pre>
<p>
Is actually transformed in something like <code>GetAllTasks</code> that recieves ApiToken object and returns <code>IList&lt;Task&gt;</code>. <code>Task</code> is yet another model class we have to deal with.
</p>
<p>
This is a kind of analysis stage of implementation, you just need to understand interface and model.
</p>
<h2>Define interface and model</h2>
<p>
After you done you are ready to define interface:
</p>
<pre class="brush: csharp">
public interface ITrackytApiAdapter
{
    ApiToken Authenticate(string email, string password);

    IList&lt;Task&gt; GetAllTasks(ApiToken token);
    Task AddTask(ApiToken token, string description);
    int DeleteTask(ApiToken apiToken, int taskId);
    Task StartTask(ApiToken apiToken, int taskId);
    Task StopTask(ApiToken apiToken, int taskId);
    void StartAll(ApiToken apiToken);
    void StopAll(ApiToken apiToken);
}
</pre>
<p>
You see that all methods, defined in <a href="http://www.trackyt.net/Home/ApiV11">documentation</a> are reflected as interface methods, all data accepted/returned by methods are defined as <a href="http://en.wikipedia.org/wiki/Plain_Old_CLR_Object">POCO</a>.
</p>
<pre class="brush: csharp">
public class ApiToken
{
    public ApiToken(string token)
    {
        Value = token;
    }

    public String Value { get; private set; }
}

public class Task
{
    public int Id { set; get; }
    public string Description { set; get; }
    public DateTime CreatedDate { set; get; }
    public DateTime? StartedDate { set; get; }
    public int Status { set; get; }
}
</pre>
<h2>Integration testing</h2>
<p>
Is it possible to code without tests? I don&#8217;t think so. So, what we are going to do - one by one, tests all adapter methods. That&#8217;s should not be &#8220;super-duper-complex&#8221; test (at least during initial implementation), but rather smoke test ones. Do the call and see that results back. Here is just a several examples of tests for <code>Authentication</code> and <code>GetAllTasks</code>.
</p>
<pre class="brush: csharp">
[Test]
public void Authenticate_AuthenicationSuccess_ReturnApiToken()
{
    // arrange
    var adapter = TrackytApiAdapterFactory.CreateV11Adapter();

    // act
    var apiToken = adapter.Authenticate(_email, _password);

    // assert
    Assert.That(apiToken, Is.Not.Null);
    Assert.That(apiToken.Value, Is.Not.Null);
}

[Test]
[ExpectedException(typeof(NotAuthenticatedException))]
public void Authenticate_AuthenticationFailed_ExceptionThrown()
{
    // arrange
    var adapter = TrackytApiAdapterFactory.CreateV11Adapter();            

    // act
    var apiToken = adapter.Authenticate("nouser", "noemail");
}
</pre>
<h2>Implementation</h2>
<p>
There are 2 very suitable components you might use for any REST API adapters:
</p>
<ul>
<li>
<a href="http://james.newtonking.com/pages/json-net.aspx">James Newton JSON.net</a> library - the best framework to handle JSON&#8217;s in .NET (imho). I enjoy how easy to serialize and deserialize of data with JSON.net.
</li>
<li>
<a href="http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx">WebClient</a> object - that is part of .NET framework and encapsulate all basic HTTP functions.
</li>
</ul>
<p>
Here we go. Our task is to send HTTP request to server, check it for correctness and transform server reply to .NET objects. To do that is great to model all responses into POCO (as we did with model classes <code>ApiToken</code> and <code>Task</code>). The difference is that <code>Responses</code> are actually internal classes, part of implementation and adapter users should know nothing about them. For instance let&#8217;s see <code>AuthenticationResponse</code>
</p>
<pre class="brush: csharp">
class AuthenticationResponse : BaseResponse
{
    internal class ResponseData
    {
        [JsonProperty("apiToken")]
        public string ApiToken { set; get; }
    }

    [JsonProperty("data")]
    public ResponseData Data { set; get; }
}
</pre>
<p>
The base response is some common part of data that every response suppose to contain. In my case:
</p>
<pre class="brush: csharp">
class BaseResponse
{
    [JsonProperty("success")]
    internal bool Success { set; get; }

    [JsonProperty("message")]
    public string Message { set; get; }
}
</pre>
<p>
We should deserialize responses with JSON.net and send requests with WebClient. Let&#8217;s just see simple code example:
</p>
<pre class="brush: csharp">
public ApiToken Authenticate(string email, string password)
{
    using (var client = new WebClient())
    {
        var authenticationJson = JsonConvert.SerializeObject(new { Email = email, Password = password });
        client.Headers.Add(HttpRequestHeader.ContentType, "application/json");
        var responseString = client.UploadString(ApiUrl + "authenticate", authenticationJson);
        var response = JsonConvert.DeserializeObject&lt;AuthenticationResponse&gt;(responseString);
        if (!response.Success)
        {
            throw new NotAuthenticatedException();
        }

        return new ApiToken(response.Data.ApiToken);
    }
}
</pre>
<p>
It simply creates new WebClient instance, <code>UploadString</code> method perform&#8217;s POST by default and places string object as POST payload. Then we receive response as string and try to deserialize to target response type. In case it could not serialize that, exception will be thrown. Next, it check result of operation and return required data back to client.
</p>
<p>
The implementation of the rest of methods is mostly the same, differing by type of HTTP request (GET, POST, DELETE, PUT) and request/response objects. Let&#8217;s see <code>GetAllTasks</code> method that does GET request and returns all users tasks:
</p>
<pre class="brush: csharp">
public IList&lt;Task&gt; GetAllTasks(ApiToken token)
{
    using (var client = new WebClient())
    {
        client.Headers.Add(HttpRequestHeader.ContentType, "application/json");
        var responseString = client.DownloadString(ApiUrl + token.Value + "/tasks/all");
        var getAllTasksResponse = JsonConvert.DeserializeObject&lt;GetAllTasksResponse&gt;(responseString);

        if (!getAllTasksResponse.Success)
        {
            throw new Exception("Can't get users tasks. " + getAllTasksResponse.Message); 
        }

        return getAllTasksResponse.Data.Tasks;
    }
}
</pre>
<p>
As reference I&#8217;ll give you implementation of <a href="https://github.com/alexanderbeletsky/trackyt.api.csharp">trackyt.api.csharp</a> by me and <a href="https://github.com/erikzaadi/GithubSharp">GithubSharp</a> API by <a href="http://erikzaadi.com/">Erik Zaadi</a>.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/02/refactoring-to-testability.html">
    
      Refactoring to testability</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-02-21T10:33:00+02:00" pubdate data-updated="true">Feb 21<span>st</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/refactoring/'>Refactoring</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Suppose you are working on some web <a href="http://www.beletsky.net/2010/12/lets-take-rest.html">REST</a> API adapter. It would be basically one class with bunch of methods. Each method would represent each supported API call. Through the implementation you would probably landed with something like this,
</p>
<pre class="brush: csharp">
public class ApiAdapter
{
    private HttpClient _client;
    private RequestFormatHelper _requestFormatHelper;
    private ResponseFormatHelper _responseFormatHelper;

    // ...
    
    public ApiAdapter()
    {
        _client = new HttpClient(/* ... */);
        _requestFormatHelper = RequestFormatHelper(/* ... */);
        _responseFormatHelper = ResponseFormatHelper(/* ... */);
    }

    void CreateNewTask(Task task)
    {
        // implementation
    }

    void DeleteTask(Task task)
    {
        // implementation
    }

    // rest of methods...
}
</pre>
<p>
Nevertheless, the code works it has several code smells: 
</p>
<ul>
<li>
<strong>High cohesion</strong> - the relation between objects are really strong. Objects are aggregated and aggregation is the one of strongest types of links between objects. 
</li>
<li>
<strong>Violation of <a href="http://en.wikipedia.org/wiki/Open/closed_principle">Open/Closed principle</a></strong> - one of the SOLID object oriented design principles.
</li>
<li>
<strong>Lack of testability</strong> - if you decide to unit test this code, you will be in problem. Unit testing is supposed to be done in <a href="http://c2.com/cgi/wiki?UnitTestIsolation">isolation</a>. Having high cohesion code you can&#8217;t get required level of isolation. Moreover it is not possible to substitute concrete class with <a href="http://en.wikipedia.org/wiki/Mock_object">mock object</a> by using some famous JMock, RhinoMocks or Moq.
</li>
<li>
<strong>Lack of flexibility</strong> - if you decide to change implementation of some of depended objects, say <code>ResponseFormatHelper</code> you would probably change the implementation of <code>ApiAdapter</code> as well.
</li>
</ul>
<p>
If you think that you code is not testable or flexible, don&#8217;t waste your time.. apply the power of refactoring.
</p>
<p>
What to do? It is basically very simple to correct such code, you just need to follow this:
</p>
<ul>
<li>
<strong>Always hide the details behind the interface</strong> - all behavior objects must conform to particular interface. Other objects must refer to another object only with knowledge of the interface. In terms of programming languages, if you pass object to client code you must always pass it by interface (e.g <code>public SomeAction(IHttpClient client, Type type, Data data);</code>.
</li>
<li>
<strong>Use dependency injection for louse coupled code</strong> - try to avoid to create depended object by <code>new</code>, inject the dependency by constructor of public property. (e.g <code>public ApiAdapter(IHttpClient client, IRequestFormatHelper requestHelper, IResponseFormatHelper responseHelper)</code>.
</li>
</ul>
<p>
How the code might look after refactoring:
</p>
<pre class="brush: csharp">
public interface IHttpClient
{
    void WebCall(/*...*/);
}

public interface IRequestFormatHelper
{
    string Format(/*...*/);
}

public interface IResponseFormatHelper
{
    string Format(/*...*/);
}


public class ApiAdapter
{
    private IHttpClient _client;
    private IRequestFormatHelper _requestFormatHelper;
    private IResponseFormatHelper _responseFormatHelper;

    // ...

    public ApiAdapter(IHttpClient client, IRequestFormatHelper requestFormatHelper, IResponseFormatHelper responseFormatHelper)
    {
        _client = client;
        _requestFormatHelper = requestFormatHelper;
        _responseFormatHelper = requestFormatHelper;
    }
</pre>
<p>
Now, you can easily test this code using mocks, like this simple test:
</p>
<pre class="brush: csharp">
[Test]
public void CreateNewTask_SendPutRequest_WithJson()
{
    // arrange
    var client = new Mock&lt;IHttpClient&gt;();
    var requestFormatter = new Mock&lt;IRequestFormatHelper&gt;();
    var responseFormater = new Mock&lt;responseFormatHelper&gt;();

    // act 
    var api = new ApiAdapter(client, requestFormatter, responseFormater);
    api.CreateTask (new Task());

    // arrange
    client.Verify(client.WebCall(/*...*/)).Called().WithArguments(/*...*/;
}
</pre>
<p>
And change any details of injected objects, without any changes in <code>ApiAdapter</code>. Refactoring to testablity is important, as much testable code you got as much flexible code you got.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  <div class="pagination inner pure-u-1">
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</div></div>
	<footer class="pure-g-r"><div class="inner pure-u-1">
	<p>
		Theme developed by <a href="#">@alexbeletsky</a> | Powered by <a hfef="#">Octopress</a>
	</p>
	<p>
		Copyright ¬© 2010 - 2013 beletsky.net
	</p>
</div>

</footer>
	<div class="buttons">
	


	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


	

</div>
</body>
</html>