
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alexander Beletsky's development blog</title>
  <meta name="author" content="Alexander Beletsky">

  
  <meta name="description" content="Run and debug your tests with shortcuts Dec 8th, 2010 TDD, Tips While I&#8217;m working in Visual Studio, I try to use my mouse as less as possible &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alexanderbeletsky.github.io/blog/page/15/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/fontello.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/pure-min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alexander Beletsky's development blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>

  

</head>


<body>
	<header class="pure-g-r"><div class="pure-g-r">
	<div class="inner pure-u-1">
		<h4 class="light">Alexander Beletsky's development blog</h4>
		<h1><a href="/">My profession is engineering</a></h1>
		<nav role="navigation" class="pure-menu pure-menu-open pure-menu-horizontal"><ul>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/talks">Talks</a></li>
	<li><a href="/blog/archives">Archive</a></li>
	<li><a href="/about">About me</a></li>
</ul>

</nav>
	</div>
</div>

</header>
	<div class="social inner pure-menu-horizontal"><ul>
	<li><a class="twitter icon-twitter" href="http://twitter.com/alexbeletsky"></a></li>
	<li><a class="github icon-github-circled" href="https://github.com/alexanderbeletsky"></a></li>
	<li><a class="stackoverflow icon-stackoverflow" href="http://stackoverflow.com/users/386751/alexanderb"></a></li>
	<li><a class="rss icon-rss" href="http://feeds.feedburner.com/abeletskyblog"></a></li>
</ul>
</div>
	<div id="content" class="inner pure-g-r"><div class="blog-index">
  
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/12/run-and-debug-your-tests-with-shortcuts.html">
    
      Run and debug your tests with shortcuts</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-12-08T12:46:00+02:00" pubdate data-updated="true">Dec 8<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/tdd/'>TDD</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
While I&#8217;m working in Visual Studio, I try to use my mouse as less as possible. You should be really comfortable to do 99% of activities just by keyboard. It saves a time.
</p>
<p>
I re-run tests hundred times per day, so clicking by a mouse is a bad option. Doesn&#8217;t matter you use <a href="http://testdriven.net">Testdriven.net</a> or <a href="http://www.jetbrains.com/resharper/">Resharper</a>, you have ability to use shortcuts for quick run.
</p>
<h2>Testdriven.net</h2>
<p>
Tools -> Options -> Keyboard -> Testdriven.NET.RunTests and assign it to &#8220;Ctrl + R, Ctrl + T&#8221; (run tests)
</p>
<p>
Tools -> Options -> Keyboard -> Testdriven.NET.Debugger and assign it to &#8220;Ctrl + R, Ctrl + D&#8221; (run debugger)
</p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/TP9iM31SeuI/AAAAAAAAG_0/WU7k2RL15b8/s1600/testdriven1.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 232px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/TP9iM31SeuI/AAAAAAAAG_0/WU7k2RL15b8/s400/testdriven1.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5548261239229151970" /></a>
<h2>Resharper</h2>
<p>
Tools -> Options -> Keyboard -> Resharper.Resharper_UnitTest_ContextRun and assign it to &#8220;Ctrl + R, Ctrl + T&#8221; (run tests)
</p>
<p>
Tools -> Options -> Keyboard -> Resharper.Resharper_UnitTest_ContextDebug and assign it to &#8220;Ctrl + R, Ctrl + D&#8221; (run debugger)
</p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_stL4bIIuRUs/TP9iULNrfeI/AAAAAAAAG_8/RdMDN5k6uuA/s1600/resharper.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 232px;" src="http://1.bp.blogspot.com/_stL4bIIuRUs/TP9iULNrfeI/AAAAAAAAG_8/RdMDN5k6uuA/s400/resharper.png" border="0" alt=""id="Img1" /></a></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/11/you-stucked-stop-and-ask-for-help.html">
    
      You stucked? Stop and ask for help!</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-11-26T13:24:00+02:00" pubdate data-updated="true">Nov 26<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/trackyt-dot-net/'>Trackyt.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
I&#8217;ve been working on one task for last several days. In a product I work there is feature that looks like Excel - template editor. User is able to put a data to sheets and do some simple calculation with formulas (SUM, MUL etc.). This functionality has been created far ago and worked fine. But recently we&#8217;ve changed our engine and now we support not only &#8220;plain&#8221; data structure, but expanded one - when user is able to say - &#8220;this column or row is expanded with such data&#8221;. Data size is dynamic and could be predicted while template edition and SUM function have to take into account that data is expanded.
</p>
<p>
So, I&#8217;ve created a number of test cases that cover new functionality and implemented simple mechanism that process formula like SUM(A1:B2) and adjust start and finish indexes according to size of expansion. At the beginning that <code>AdjustIndexes</code> function were small and easy to read, it just perform simple calculation based on current row/current column, original indexes places and some information from expanded data. 
</p>
<p>
But after a demo we&#8217;ve found some bugs: if several expansions present in template - it fails. If not expanded data comes after expanded it fails and some more..
</p>
<p>
I&#8217;ve extended tests cases with all found issues and start to attack problem. I start to adjust <code>AdjustIndexes</code> to work with new cases. And after a while I&#8217;ve completed it, but this function started to look scary - a lot of nested if-else cases, calculation of indexes, += operations etc. OK, I thought.. it could be refactored later, so I did a checkin. My happiness was not long, because while developers tests I just found another bug. OK, usual stuff - test and fix. Let&#8217;s go.
</p>
<p>
Meanwhile I&#8217;ve already spent about 6 hours on that. At stand-up I said - &#8220;it seems to be alright, only one case is failing now, I&#8217;m finishing up and commit&#8221;. But I was wrong. As I changed the function to work with new case, new case became green but existing ones became red.. I fell stress that task originally estimated for 1 day is now 1.5 and supposed to be about 2 days. I wanted to do quickly, so started to play a game - &#8220;Change something, re-run the tests if GREEN - you win!&#8221; (such approach actually works some time as soon as you got good test cases and double check the results). Already created function became more scary and what is worse - it does not satisfied all tests. I lost the control of it and only one I understand - &#8220;I do not now understand this function works now.. It does something wrong and I have to go with another idea to solve the problem&#8221;.
</p>
<p>
It was about 10 hours spend on that. I started to lose the game, but just didn&#8217;t want to give up. I need another idea, I need another approach.. I need additional data structures that would help to map original table indexes to expanded ones, I need to change the engine to fill those mapping, I need to change <code>AdjustIndexes</code> function to take mapping into account. I felt a little tired and stressed but proceed with coding like crazy. 
</p>
<p>
14 hours passes, late evening, and I was finishing up my <code>Mapping</code> mechanism, while I was contacted by my teammate Carsten - &#8220;How is it going with SUM?&#8221;. I&#8217;ve explained my issues, my approach and my status, but basically it was like - &#8220;It is not yet done&#8221;. But he said that it seems like I&#8217;m doing something wrong and proposed another algorithm of doing this adjustment, with no other additional data structures. I probably was to tired to understand everything there, so he just said &#8220;Wait for 30 minutes, I&#8217;ll do some code and show to?&#8221;.  I&#8217;ve been shocked, something I worked for 14 already he want to do in 0.5 hour? OK.  
</p>
<p>
He sent his first solution. Hopefully it was only one function to change I could easily integrated and re-run all test cases I had so far. Most of them were failed at first try. We started a pair session and after several run/fix/test sessions it started to work! All tests are green! It works in application.. Function is quite small and easy to read.
</p>
<p>
Yeahh.. that was such great work (respect to Carsten) and so such shame on me. 15 hours.. vs 40 minutes.. 30 lines of code vs. 300.. one point of integration vs. many. I&#8217;ve been defeated.
</p>
<p>
When I finished it up and went a street to walk with dog, I&#8217;ve tried to find at lest something positive in all this situation. And you know what? I can up with one another feature to <a href="http://trackyt.net">trackyt.net</a>. 
</p>
<p>
If you have a task in progress and you spend 12 (8, 6 or even 4) hours, task is became red and interacts with user:
</p>
<ul>
<li>Take a rest, re-think</li>
<li>Ask for help</li>
</ul>
<p>
That would prevent my situation somehow. It will try to say to you &#8220;Man, you probably stucked with that, ask some one to take a look&#8221;.. This seems to be obvious, but if you are in hurry you are not just doing that hoping to handle everything by yourself. This is not good. I was happy about such idea and lesson learned, so back to home with good mood already :).
</p>
<p>
Have you been to such situation, do you think it&#8217;s valuable if you have some stopwatch and notifier that would push you shoulder and say &#8220;Stop now ask for help!&#8221; ?
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/11/ive-release-my-own-product-trackytnet.html">
    
      I&#8217;ve released my own product - Trackyt.net</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-11-24T07:53:00+02:00" pubdate data-updated="true">Nov 24<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/trackyt-dot-net/'>Trackyt.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
I&#8217;ve not been blogging for awhile, not because I&#8217;m too lazy but because I&#8217;ve spent all the time for my own first release. And today I&#8217;m very happy, proud and excited to announce that <a href="http://www.trackyt.net">Trackyt.net</a> is now available online. 
</p>
<p>
<a href="http://www.trackyt.net">Trackyt.net</a> is a simple time management application. I&#8217;ve chosen this idea while I was working on my self-study project, just because it is well known, something I can use for myself. Latter on I started to feel that I see a bigger picture, bigger product that I want to build, where time tracking is just a small part of. That time I created first draft of <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/wiki/Project-Roadmap-2010---2011">Product Roadmap</a> and now I try to follow it. That was mainly been influenced how we work in my current <a href="http://www.e-conomic.com/">company</a> what tools and process we are using.
</p>
<p>
It is a spare time project. At the beginning I spent no more that 3-4 hours per week mainly on weekends. But last several month&#8217;s when I&#8217;ve been approaching release dates I put almost all my free time on that.
</p>
<p>
Project is already on milestone 2, &#8220;Look & Feel Release&#8221; and supposed to be public. Nevertheless the time and effort it is still <a href="http://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a>. It&#8217;s primary functionality could be described in one sentence: &#8220;give you task a name; add new task on dashboard; start timer as you started to work on this task and release timer as you stopped; submit task on server;&#8221;. Originally I haven&#8217;t planned to go in a public availability with that. It was just a playground for HTML/CSS, MVC 2, jQuery. So, even now it lacks some common site functionality as mail notifications, remember me and so on.
</p>
<p>
I were inspired by some other small projects that people releasing just for fun. I like that someone working to have own &#8220;footprint&#8221; in web having a product placed there. I like that way of learning the things not only from books but from practical exercises. I like to have something to care, plan, enhance, develop. I hope that I would be receiving feedbacks that might would make a product better. 
</p>
<p>
It is <a href="http://www.trackyt.net/Home/Faq#OpenSource">open source</a>. You can crawl the <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net">repository</a> and find something interesting for you. It would be great if you fork it and push some changes. I continue to make it open sources as far as I can do.
</p>
<p>
Site design have been created by Sasha. She have never tried a web design before this project. We&#8217;ve started together with simple tutorials and articles, replicating some existing site designs, learning photoshop. I was happy to see how fast she delivered first results. Even if we usually have completely different vision on things we came to one result. So, during the project we also formed a nice team of developer and designer. 
</p>
<p>
So, as soon as original idea was to learn something new, what have I learned so far? A lot I think:
</p>
<ul>
<li>
<a href="http://gettingreal.37signals.com/toc.php">Getting Real</a> - methodology and recommendations by creators of Ruby on Rails, that fits my project perfectly. 
</li>
<li>
<a href="http://asp.net/mvc">ASP.net MVC 2</a> - I&#8217;ve got a great introduction to MVC2 with a lot of help of Steven Sanderson great book <a href="http://apress.com/book/view/1430228865">Pro ASP.NET MVC 2 Framework, Second Edition</a>.
</li>
<li>
<strong>JavaScript/jQuery</strong> - this one became one of my favorite language and jQuery one of the favorite frameworks.
</li>
<li>
<strong>HTML/CSS</strong> - I&#8217;ve never done so much HTML/CSS before. I would not say I&#8217;m good on it, but I definitely improved.
</li>
<li>
<a href="http://www.beletsky.net/2010/10/uppercut-your-builds.html">UpperCut and Roundhouse</a> - good tools that help you with versioning and deployment.
<li>
<strong>Moq, Automapper, JSon, REST</strong> and more :).
</li>
</ul>
<p>
What should I do now? I would take one week rest and to refresh my eyes a bit. I would start with a planning next release and next sprints to work on. I hope to back for my normal blogging rhythm again as well as support a <a href="http://www.trackyt.net/Blog">product blog</a>. So, I still got something to do :). But today is the birthday of  <a href="http://www.trackyt.net">Trackyt.net</a> and on weekend I would be definitely celebrating it!
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/11/testing-database-and-test-database.html">
    
      Testing database and Test database</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-11-05T08:43:00+02:00" pubdate data-updated="true">Nov 5<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/dal/'>DAL</a>, <a class='category' href='/blog/categories/linq/'>Linq</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Testing the database is important. It is absolutely required then your DAL is simply a bunch of methods that do SQL against the DB. It still required to be done then you rely on some ORM (like Linq to SQL, NHibernate etc).
</p>
<h2>Testing database</h2>
<p>
By testing the database I mean unit tests that runs database operation tasks (create, update, delete, stored procedures calls) and test asserts that operation is being completed successfully.  
</p>
<p>
Even the SQL is simple enough (like a <code>SELECT</code> or <code>UPDATE</code>) it have to be tested. More complex stuff, like <code>JOIN</code>, <code>UNION</code> etc. have to tested with much more care (meaning different scenarios, different input set etc.). As more complex query you have, as more complex test you should do. I personally trying to avoid complex SQL queries, because they difficult to read and support, but in many cases is the only way you can do.
</p>
<p>
Example of test case of DAL methods that runs <code>SELECT</code> statement:
</p>
<a href="https://gist.github.com/662906">https://gist.github.com/662906</a>
<script src="https://gist.github.com/662906.js?file=gistfile1.cs"></script>
<p>
Using ORM simplifies life a bit. You are working with objects, creation of new record in DB is just creation of new object and call <code>InsertOnSubmit()</code> method. In many cases you have to trust that framework does its job correctly and do not write the tests for framework, that is simple waste of time. But what usually happens is that you have a wrappers against ORM <code>DataContext</code>, like a <code>Repository</code> and the behavior of <code>Repository</code> have to be validated with tests (check out about repositories <a href="http://www.beletsky.net/2010/06/ddd-implementation-of-repository.html">here</a>). Typically repositories interface looks like that:
</p>
<a href="https://gist.github.com/662918">https://gist.github.com/662918</a>
<script src="https://gist.github.com/662918.js?file=gistfile1.cs"></script>
<p>
All interface methods and properties are covered by tests. Moreover, if you have repositories <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/src/Trackyourtasks.Core/DAL/Extensions/BlogPostsExtensions.cs">extensions</a> that helps you to select record by Id, or do paging they are also part of testing. Please check how this <code>IBlogPostsRepostitory</code> is tested by this example - <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/src/Trackyourtasks.Database.Tests/Tests/DAL/BlogPostsRepositoryTests.cs">example</a>.
</p>
<p>
What else about testing database you should know?
</p>
<p>
First of all, database tests might required some initial data to be put in database before each test start. It could be easily solved by using <code>[TestSetup]</code> and <code>[TestTearDown]</code> methods of Fixture. Bad side of this that you could not customize the data for particular test, because Setup/TearDown runs the same code that you could not parameterize. I prefer to use a static method (or methods) that is placed in <code>TestFixture</code> and called at the beginning of unit test. Please see <code>SubmitTenBlogpostsToRepository</code> from previous example.
</p>
<p>
Second at all, you have to care about test isolation some how. It means that previous tests results should not affect next test cases, each tests case have to leave the database in the same state as it enters it. There are different approaches how to do that, I like something like this. I&#8217;m having <code>FixtureInit</code> that does kind of initialization for any test case and it contains <code>DbSetup</code> instance in it. <code>DbSetup</code> itself holds <code>DataContext</code> as well as <code>TransactionScope</code> object. <code>TransactionScope</code> is a very nice way of handling <a href="http://msdn.microsoft.com/en-us/library/ms172152(VS.90).aspx">implicit transactions</a>. Inside <code>DbSetup</code> constructor we also could put some test data initialization, as it would be shared thought all tests. <code>Dispose</code> methods of the <code>DbSetup</code> disposes a transaction without committing it. Each test case body is placed in <code>using (var fixture = new FixtureInit("http://localhost"))</code>, 
    so any data that is placed (or deleted) from database during the tests would not 
    affect the database then test is finished. It is simple and works good, please 
    check out for implementation <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/tree/master/src/Trackyourtasks.Database.Tests/Framework">here</a>.
</p>
<p>
The last thing - layout and naming of database tests. Database tests have to be separated from application unit tests. It a good way of doing the testing. Database tests are usually too slow and you do not need to re-run them after minor changes (except changes in DAL). That&#8217;s why it is better to place DB tests to separate assembly. The name of assembly should contain <code>*Database.Tests</code>. It gives a clear understanding of assembly goal, as well as it will not be re-runned every time as you do <code>build.bat</code> by <a href="http://www.beletsky.net/2010/10/uppercut-your-builds.html">UppercuT</a>
</p>
<h2>Test database</h2>
<p>
Test database is database against that database tests are running.. and typically <code>Test Database == Developer Database</code>, meaning the same database as developer tests the application is used for database unit tests. 
</p>
<p>
It it bad in several reasons. 
</p>
<p>
By doing developers testing you make database really &#8220;dirty&#8221;. Putting new records in DB or deleting existing ones, doesn&#8217;t matter. I usually do a small test that if I put new object(s) I check the count of objects in table after, like <code>Assert.That(foundTasks.Count(), Is.EqualTo(2));</code>. But if I <code>Tasks</code> table will have some data before, I&#8217;m not guaranteed that count will be 2, but <code>Assert.That(foundTasks.Count(), Is.EqualTo(countOfObjectBeforeInsert + 2));</code> will be running OK. It works, but I don&#8217;t really like it, because it mess up test with some not required details.
</p>
<p>
It is possible that some complex database tests, could leave database in inconsistency state 
    during its failure (that is actually bad and you have to design the tests to prevent this happening.. but it is happening especially with no-ORM, no-Transactions DAL). Also, one bad surpise could be if database tests deletes some data required for development testing.
</p>
<p>
So, it should be <code>Test Database != Developer Database</code>, test database and developer database are different instances actually. Test database must be restored with save version of developers database, but in general it is empty and its state is not changed after testing complete.
</p>
<p>
I&#8217;m using <a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a> to deploy database. As I was describing in previous post I use <code>initdb.bat</code> and <code>resetdb.bat</code> to initialize and reset developer database. I&#8217;ve just created 2 others that do exactly the same but for <code>trackytest</code> database, <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/inittestdb.bat">inittestdb.bat</a>, <a href="https://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/resettestdb.bat">resettestdb.bat</a>. In the same time, <code>app.confing</code> of test project is pointed to <code>trackytest</code> (instead of <code>trackydb</code> before). So now tests are running on <code>trackytest</code>, but the application itself on <code>trackydb</code>.
</p>
<p>
It is very convenient to work like that.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/roundhouse-your-database.html">
    
      Roundhouse your database</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-26T18:14:00+03:00" pubdate data-updated="true">Oct 26<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/open-source/'>Open source</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
As you started to use <a href="http://code.google.com/p/uppercut">UppercuT</a> for your builds, it is definitely worth to try worth to try <a href="http://code.google.com/p/roundhouse/">RoundhousE</a> for versioning, deployment, migration of your database. 
</p>
<h2>RoundhousE - setup and usage</h2>
<p>
Let&#8217;s begin, just to to project web site and download latest package. Package contains documentation (just some draft version, not yet completed), samples and framework itself.
</p>
<p>
Initially I spent sometime to make samples run. Documentation said that it has been developed and tested with SQL 2008 Server and there is no information that it would run on SQL 2008 Express Edition. After several fail/repeat sessions I was happy to see that it actually could work with Express edition as well!
</p>
<h3>Before you start</h3>
<p>
Before you start, you have to change something in you SQL Express configuration. Go to <code>Start -> All programs -> Microsoft SQL Server 2008 -> Configuration Tools -> SQL Server Configuration Manager</code>. There you have to configure your SQL instance Network Configuration, to be able with &#8220;Named Pipes&#8221; protocol. So, go to <code>Protocols for &#60;%INSTANCE_NAME%&#62;</code> and enable <code>Named Pipes</code>
</p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/TMbwcl2QFnI/AAAAAAAAG-8/ZK_EGoi0q5k/s1600/sqlconfig.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 301px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/TMbwcl2QFnI/AAAAAAAAG-8/ZK_EGoi0q5k/s400/sqlconfig.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5532373566257895026" /></a>
<h3>UppercuT configuration</h3>
<p>
Now you have to change something into UppercuT config. First you have to modify <code>LOCAL.settings</code> (file that is used for generation of deployment scripts). You have to supply <code>server.database</code> (in case of local Express it would be .\SQLEXPRESS), <code>database.name</code> the name of your db. 
</p>
<p>
After small changes is required for <code>UppercuT.config</code>. First, <code>folder.database</code> I just used &#8220;db&#8221;, short and clear.
</p>
<p>
Check out this <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/commit/552895c301426ad413d83eb9c5c7ef00cf8c52a6#diff-7">diff</a>, for instance.
</p>
<h3>DB folder layout and content</h3>
<p>
Now, you have to create folder that would contain all sql scripts. I places it in the same level as <code>docs</code>, <code>lib</code> etc (but it could be placed to <code>src</code> folder as well). So, please folder with name &#8220;db&#8221;.
</p>
<p>
Documentation currently lacks information about folder layout, but from samples it is pretty clear:
</p>
<ul>
<li><strong>functions</strong> - sql for functions definitions</li>
<li><strong>permissions</strong> - setup permissions for database</li>
<li><strong>sprocs</strong> - stored procedures definition</li>
<li><strong>up</strong> - update scripts (create, drop, alter tables and records here)</li>
<li><strong>views</strong> - views definition</li>
</ul>
<p>
If your application doesn&#8217;t currently use stored procedures or view.. it is OK to just leave those folders empty.
</p>
<h3>Deployment options</h3>
<p>
You have 3 options of deployment: by Nant, by MSBuild or by RH executable. It does not actually matters what to choose, all options are equal by its functionality. I choose executable, because it lightweight and only one file (please not that it would be included to deployment package).
</p>
<p>
To go with RH you have to copy it from RoundhousE packages into yours deployment folder. So, you will have <code>deployment/rh/rh.exe</code>.
</p>
<h3>Correction of deployment scripts</h3>
<p>
Deployment scripts are ones that will be used on production to update database. They are created based on templates and settings you set. You have to modify yours <code>DBDeployment.bat</code> file. Since I use <code>rh.exe</code> I created template for it. It simply runs <code>rh.exe</code> that does the rest of work. 
</p>
<script src="http://gist.github.com/645211.js"> </script>
<p>
Check out this <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/commit/552895c301426ad413d83eb9c5c7ef00cf8c52a6#diff-7">diff</a>, for instance.
</p>
<h3>Running RoundhousE</h3>
<p>
As soon as build application, go to <code>code_drop</code> folder you can run <code>LOCAL.BEDeployment.bat</code> and RounhousE will setup database with version it.
</p>
<p>
That&#8217;s basically it! As soon as its configured you can easily add new scripts to db folder, RoundhousE will handle changes of them.
</p>
<h3>Additional scripts I use</h3>
<p>
There are something that I added for my personal needs. If I do build on new environment, I would like to create database first. For such purpose I created <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/initdb.bat"><code>initdb.bat</code></a>, so build procedure on clean environment would be:
</p>
<ol>
<li>run build.bat</li>
<li>run initdb.bat</li>
<li>run test.bat all</li>
</ol>
<p>
I also created script to reset database,  <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/blob/master/resetdb.bat"><code>resetdb.bat</code></a> drops existing database and just creates new instance. This very useful during development, if you database became &#8220;dirty&#8221;. 
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/uppercut-your-builds.html">
    
      UppercuT your builds</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-22T13:05:00+03:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/open-source/'>Open source</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
I like open source tools and frameworks, but more I like open source tools and frameworks that work! There are 2 nice frameworks that I started to use really fast got exactly what I need. They are <a href="http://code.google.com/p/uppercut">UppercuT</a> and <a href="http://code.google.com/p/roundhouse/">RoundhousE</a>. I&#8217;ve planned to blog about both, but post appears to be quite long, so I&#8217;ll spilt it on two.
</p>
<p>
It is all about build and deployment. I&#8217;ve seen different build and deployment system through my career: some domestic made, some commercial, some simple, some complex. I&#8217;ve recently started to think about for my own project. But before we started, lets make it clear - what I personally expect from build framework?
</p>
<ul>
<li>It have to use a industry standard tools - nant, msbuild, nunit, ncover etc.</li>
<li>Build have to be done by one click (press key)</li>
<li>During build unit tests have to run</li>
<li>During build different code metrics must be collected</li>
<li>It have to be integrated with popular SCM systems - svn, git, perforce etc.</li>
<li>It must have easy to use versioning system, all build artifacts (binaries, docs) are labeled with one consistent version</li>
<li>It must have automatic packaging mechanism, to deploy package on target machine</li>
</ul>
<p>
If you are having database in your application, you should also be concerned of.
</p>
<ul>
<li>Versioning of database</li>
<li>Deployment of database on any environment</li>
<li>Updating live database with new patches</li>
</ul>
<p>
Initially I thought to do some very simple by myself, but later I was browsing some repositories on github and noticed interesting project structure - build/deployment folders as well as number of batch files, like build.bat, test.bat, open.bat etc. I digged a bit and found out that it is actually scaffold provided by UppercuT. After I checked some documentation, I realized that it is probably something that I need! So, please met two projects that would simplify your life a bit: UppercuT - automation build/versioning/packaging; RoundhousE - db migration/versioning/deployment. 
</p>
<h2>UppercuT setup and usage</h2>
<p>
Just go to <a href="http://code.google.com/p/uppercut">UppercuT</a> web site and download latest package. I&#8217;ve used 1.0.5.0, in package you will found some docs, that might be interesting to read and framework itself in UppercuT folder. 
</p>
<p>
What&#8217;s inside? Well, package contains a configuration files, batch/shell scripts, nant scripts and number of tools - <code>MbUnit</code>, <code>MoMa</code>, <code>NAnt</code>, <code>NCover</code>, <code>NUnit</code>. Internally UppercuT uses nant for build automation. If you are not familiar with nant.build scripts, please don&#8217;t worry. UppercuT created in a way, that you very isolated of nant details and perform all configuration only in one place, <code>settings/UppercuT.config</code> - simple XML file.
</p>
<p>
If you want to apply UppercuT to your existing project, I would recommend to do following steps before you start.
</p>
<ul>
<li>Change you folder structure in the way to have on: <code>docs</code>, <code>lib</code>, <code>src</code> on higher level of directories tree.</li>
<li>
Solution file (.sln) and all projects are put to <code>src</code> folder.
</li>
<li>
All 3rd parties (nunit, moq, ninject etc.) referenced from lib folder.
</li>
<li>
Project documentation moved to <code>docs</code> folder.
</li>
</ul>
<p>
As soon as you done, just copy all content of UppercuT folder into your project folder. You are ready to use it. Before actual use you have to configure it. Fortunately, it have to be done only in one place - <code>settings/UppercutT.config</code> file. You have to provide <code>project.name</code>, <code>path_to_solution</code>, <code>repository.path</code> and <code>source_control_type</code>, <code>test.framework</code> and <code>microsoft.framework</code> (net-4.0 is supported).
</p>
<p>
As you provided all required keys you are able to start build! If you have compliable sources and runnable unit tests, you have to receive SUCCESS build status (I failed to start it at first time, having problems with 
    nunit, please see Issues section below). 
</p>
<p>
Lets see what UppercuT does for us:
</p>
<ol>
<li>
It uses source repository to generate <code>_BuildInfo.xml</code> and <code>SolutionVersion.cs</code> files. <code>_BuildInfo.xml</code> contains a digest of build, with revision, version, path to repository, dot-net framework version etc. <code>SolutionVersion.cs</code> is code file that must be referenced from all projects in solution, so they all have a common version. 
</li>
<li>
It compiles all projects in solution.
</li>
<li>
It runs all unit test in solution (please note, it run only units - projects with *Test* in their names. It does smart job to skip Database, Integration tests). 
</li>
<li>
It copies all db scripts and documentation to build_output folder.
</li>
<li>
It generates batches for build deployment and db deployment.
</li>
<li>
It analyzes output binaries with such tools as NCover, NDepend (it is not in package, because it is commercial but if you have it UppercuT will use it), MoMa etc and place results to <code>build_artifacts</code> folder.
</li>
<li>
It packages everything to <code>code_drop</code> folder, where everything is on right places - web content, binaries, db scripts and build artifacts.
</li>
</ol>
<p>
A lot of things for free, right? What more you can do?
</p>
<ol>
<li>
You can run <code>open.bat</code> that by default open your Visual Studio with solution.
</li>
<li>
You can run <code>test.bat</code> to build and re-run unit tests, <code>test.bat all</code> will run all types of tests - units, integration, database. <code>test.bat</code> useful to be run by some Continues Integration servers as CruiseControl.
</li>
<li>
You can run <code>zip.bat</code>. Very useful feature, that would run build/tests and zip content of <code>code_drop</code> folder into one single zip file (like <code>trackyourtasks.net.v0.1.0.584b2ef4.zip</code>) that could be copied to production system for deployment and placed to repository to track builds. 
</li>
</ol>
<h3>Issues and criticism</h3>
<p>
As I said above first time I run <code>build.bat</code> it failed. The reason was that <code>nunit-console</code> loaded 2.0 runtime, but my test assemblies are build with 4.0 framework. It have been solved by modification of <code>build\analyzers\nunit.test.step</code> and adding one additional argument in <code>exec</code> of <code>run_tests</code> target <code>&#60;arg value="/framework=${microsoft.framework}" /&#62;</code>. Please check my <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/commit/f3ef494a00237275017053eb62477d7a1bebc974">commit</a> for details. <a href="http://twitter.com/#!/ferventcoder">Ferventcoder</a> already contacted me regarding that issue, for I hope in some nearest versions in would be solved :).
</p>
<p>
Another problem I met with coverage reports generation. It just generates them empy. It is not blame for UppercuT but rather for NCover, that seems to have issues with .NET 4.0. In the same time, somehow, Testdriven.net is able to run NCover with properly generated coverage reports. 
</p>
<p>
No more critic yet. What would be nice to have is already defined tasks for <a href="http://code.msdn.microsoft.com/sourceanalysis">Stylecop</a> and <a href="http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx">FXCop</a>.
</p>
<h2>Conclusions</h2>
<p>
This uppercut turns to be powerfull. If you have no build system yet, UppercuT is recomended.. If you have some &#8220;self-written&#8221; system that you tired to support - UppercuT is recomended.. If you have build system and happy about it, well.. try UppercuT, you could notice something you missing, or otherwise suggest some new feature for UppercuT :).
</p>
<p>
<b>Update:</b>
<p>
<p>Next blog post is about <a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a> to handle your database.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/test-driven-design-and-levels-of.html">
    
      Test Driven Design and levels of testing</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-19T19:26:00+03:00" pubdate data-updated="true">Oct 19<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/tdd/'>TDD</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Major benefit of TDD is not coverage, 
    regression stability, test problem solving - NO. It is - Test Driven Design 
    (Architecture). Test Driven Design is something that is being born of writing 
    tests before code, writing tests before functionality started to work, 
    writing the tests before you really clear about the rest of system (data 
    flow, integration etc.). Test Driven Design forces you to use old good patterns 
    as Factories, Template Methods.. it forces you to hide implementation behind 
    interface.. it forces you to separate concerns and divide functionality on small objects, each of it responsible for its small function 
    and could be tested exactly for its function. Instead of increase functionality by appending some code to already big function, you encapsulate new functionality to new object, test it in isolation and then easily integrate it to the place where it have to start work on. 
</p>
<p>
The reason why Test Driven Design works is that doing a tests make you a class user, make you focus on its primary goal and interface and just make it impossible (or difficult and annoying) to make a class with multiple responsibilities. 
</p>
<p>
How to get practical benefits of TDD, what level of testing should I consider to be sure I following the plan of TDD? 
</p>
<p>
<small>
<b>Disclaimer:</b> all code samples are created very quickly, just to demonstrate ideas, should not be considered as working examples.
</small>
</p>
<h2>Level 1 - Unit tests</h2>
<p>
Here it all begins. Unit tests are kind of testing of really small parts of objects, like method properties and so on. This is there the actual requirements for the object is 
    created and verified. The major point of unit tests is - they have to be isolated! That means, all object(s), data, view etc. that tested object is 
    depend on, must be hidden behind corresponding interfaces. Please note, that at initial state those interface could not be defined at all (contains no methods) and its actual form will be dictated by actual object needs. 
    Object needs will be clarified on a way of applying next test cases to testable object.  
</p>
<p>
    You have to be always focus on business object or primary object. This is the one that you have to test first. If you are doing registration functionality on site, <code>Registration</code> is class to start. If you are doing calculation application <code>Calculate</code> is class to start. If you are doing web crawling application, <code>Crawler</code> is class to start.
</p>
<p>
It is always like that - business object typically requires 2 things, data and view. In some particular case BO could depend on some external services, that would mean that interface to the service should pass to constructor as well. Also, in some cases it doesn&#8217;t require a view, just returns some data to outside consumer.
</p>
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Some<br>{<br>&nbsp;&nbsp;<font color="#0000ff">public</font> Some(IData data, IView view)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;}<br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IData<br>{<br>&nbsp;&nbsp;<font color="#008000">//empty</font><br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IView<br>{<br>&nbsp;&nbsp;<font color="#008000">//empty</font><br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<p>
Then tests are being created:
</p>
<blockquote><code><font size="2" face="Courier New" color="black">[TestFixture]<br><font color="#0000ff">public</font> <font color="#0000ff">class</font> SomeTests<br>{<br>&nbsp; <font color="#008000">//create method</font><br>&nbsp; <font color="#0000ff">public</font> Some CreateSome()<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">return</font> Some(<font color="#0000ff">new</font> DataMock(), <font color="#0000ff">new</font> ViewMock());<br>&nbsp; }<br>&nbsp; <br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> SomeInScenarioOne() { }<br>&nbsp; <br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> SomeInScenarioTwo() { }<br><br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> SomeInScenarioThree() { }<br><br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">class</font> DataMock : IData<br>{<br>&nbsp;&nbsp;<font color="#008000">//some methods here</font><br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">class</font> View :&nbsp;IView<br>{<br>&nbsp;&nbsp;<font color="#008000">//some methods here</font><br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<p>
It is good design that constructor receives the interfaces only, the rest of parameters required supplied by corresponding methods arguments.
</p>
<p>
Once again, business object <strong>asks</strong> interfaces for required data or methods for displaying data. What exact data and methods are required, could be unknown at the beginning, it only depends on current business object needs. So, in a way of implementation goes interfaces of IData and IView started to form its shape. So, at the end they could look like this:
</p>
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IData <br>{<br>&nbsp; IQueryable&#60;Columns&#62; GetColumns();<br>&nbsp; <font color="#0000ff">void</font> UpdateColumn(<font color="#0000ff">int</font> id, <font color="#0000ff">string</font> name, Column column);<br>&nbsp; <font color="#0000ff">void</font> DeleteColumn(Column column);<br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IView<br>{<br>&nbsp; <font color="#0000ff">void</font> ShowSuccessMessage(<font color="#0000ff">string</font> message);<br>&nbsp; <font color="#0000ff">void</font> ShowFailMessage(<font color="#0000ff">string</font> fail);<br><br>&nbsp; <font color="#0000ff">void</font> DisplayResults(IQueryable&#60;Column&#62; columns);<br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<p>
Note, that we are absolutely don&#8217;t care about actual implementation of both interfaces at the current moment. For instance <code>Data</code> could use SQL database for columns, <code>View</code> could call some Win32 API functions for displaying results. Doesn&#8217;t matter - forget about this at all, just continue with primary object and its functionality and tests.
</p>
<p>
Mock objects should provide required methods in most simple way, like:
</p>
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> DataMock : IData <br>{<br>&nbsp; <font color="#0000ff">public</font> IQueryable&#60;Column&#62; GetColumns();<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff">var</font> list = <font color="#0000ff">new</font> <font color="#2B91AF">List</font>&#60;Column&#62; { <font color="#0000ff">new</font> Column(1), <font color="#0000ff">new</font> Column(2) };<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff">return</font> list.AsQuearyable();<br>&nbsp; }<br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<p>
For the different type of test data you could have a different mocks. Also, it is better to use some existing <a href="http://code.google.com/p/moq/">mock frameworks</a>.
</p>
<h2>Level 2 - Data/View tests</h2>
<p>
As interfaces of Data/View granulated after level 1 testing, it is time to implement them. At this time we are really clear of what exactly we are going to implement, since there is already defined contract between client (primary object) and supplier (data/view classes). 
</p>
<p>
Data/View implementation have to be tested also. There are more difficulties in testing them: data depends on SQL Server, that must be up and running, some test data have to be prepared before. View could not be tested in many cases. Netherless, why are implemented in same test before style and finally we have <code>Impl</code> classes implementation. Ones that would be used with primary object after its integration to application.   
</p>
<p>Implementation</p>
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> DataImpl : IData <br>{<br>&nbsp; <font color="#0000ff">private</font> DataContext _context;<br><br>&nbsp; <font color="#0000ff">public</font> DataImpl(DataContext context)<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp;_context = context;<br>&nbsp; }<br><br>&nbsp; <font color="#0000ff">public</font> IQueryable&#60;Column&#62; GetColumns();<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff">return</font> _context.Exec(<font color="#A31515">"SELECT * FROM COLUMNS"</font>).AsQueryable();<br>&nbsp; }<br> <br>&nbsp; <font color="#008000">//rest of method implementation</font><br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">class</font> ViewImpl : IView<br>{<br>&nbsp; <font color="#0000ff">public</font> <font color="#0000ff">void</font> ShowSuccessMessage(<font color="#0000ff">string</font> message)<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp;MessageBox(message);<br>&nbsp; }<br><br>&nbsp; <font color="#008000">//rest of method implementation</font><br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<p>
Tests:
</p>
<blockquote><code><font size="2" face="Courier New" color="black">[TestFixture]<br><font color="#0000ff">public</font> <font color="#0000ff">class</font> DataImplTest : IData <br>{<br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> <font color="#0000ff">void</font> GetColumns();<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff">var</font> data = <font color="#0000ff">new</font> DataImpl(<font color="#0000ff">new</font> DataContext());<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff">var</font> columns = data.GetColumns();<br><br>&nbsp;&nbsp;&nbsp;Assert.That(columns.Count,Is.EqualTo(10));<br>&nbsp; }<br> <br>&nbsp; <font color="#008000">//rest of method implementation</font><br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<h2>Level 3 - Integration tests</h2>
<p>
Integration tests are considered to be <a href="http://blog.jbrains.ca/integrated_tests_are_a_scam">evil</a>. I also think so, but I don&#8217;t think that it is possible to completely to avoid them. They are difficult to support and difficult to maintain them, but I think some number of integration tests have to be present to cover some typical scenarios of bugfix test cases.
</p>
<p>
In general, integration would mean - test the primary objects with concrete instances of dependent objects. Integration tests would cover a place where primary object is going to be integrated to. So, if we plan to use <code>Some</code> in <code>SomeAnother</code> you have to test the impact of this class after integration.
</p>
<blockquote><code><font size="2" face="Courier New" color="black">[TestFixture]<br><font color="#0000ff">public</font> <font color="#0000ff">class</font> SomeIntegrationTests<br>{<br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> <font color="#0000ff">void</font> IntegrationScenario()<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//arrange</font><br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">var</font> some = <font color="#0000ff">new</font> Some(<font color="#0000ff">new</font> DataImpl(), <font color="#0000ff">new</font> ViewImpl());<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//act</font><br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">var</font> results = some.Act(param1, param2);<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//post</font><br>&nbsp;&nbsp;&nbsp; <font color="#008000">//do assert</font><br>&nbsp; }<br><br>&nbsp; [Test]<br>&nbsp; <font color="#0000ff">public</font> <font color="#0000ff">void</font> IntegrationScenarioTwo()<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//arrange (some is integrated to SomeAnother)</font><br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">var</font> someAnother = <font color="#0000ff">new</font> SomeAnother(<font color="#0000ff">new</font> DataImpl(), <font color="#0000ff">new</font> ViewImpl());<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//act</font><br>&nbsp;&nbsp;&nbsp; someAnother.Act();<br>&nbsp;&nbsp;&nbsp; <font color="#008000">//post</font><br>&nbsp;&nbsp;&nbsp; <font color="#008000">//assert on actual influence of Some class on SomeAnother class</font><br>&nbsp; }<br>}</font><br><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
<h2>Level 4 - Spec tests</h2>
<p>
The final level is Spec tests. BDD (Behavior Driven Development) is next generation of TDD, focusing on user acceptance criteria&#8217;s as development driver. There are quite good tools for that already like, <a href="http://specflow.org/">SpecFlow</a> or <a href="http://storyq.codeplex.com/">StoryQ</a>.
</p>
<p>
Having those type of testing on Level 4, doesn&#8217;t mean that they are created after functionality is ready. It is recommended to create such tests first working with product owner and defining a test stories. 
</p>
<p>
Personally I have no rich experience in BDD, but ideas and success stories with Cucumber (Ruby) makes them worth to look at.
</p>
<h2>Conclusion</h2>
<p>
Testing is important. But testing to create tests are pointless. Tests have to be created to create good design, easy to read and maintain code.   
</p>
<p>
By doing tests right, they won&#8217;t complicate your life but make it easier.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/switching-from-aspnet-development.html">
    
      Switching from ASP.NET development server (Cassini) to IIS with MVC applications</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-15T12:11:00+03:00" pubdate data-updated="true">Oct 15<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/ajax/'>AJAX</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Start developing new applications on IIS already is probably good idea, since it is IIS where you application is finally landed to. Working with Cassini is great, cause it fast, requires no maintenance, very easy to start. But it could hide some issues that would surprise you during deployment. </p><p>Recently I&#8217;ve decided to switch my current Asp.net MVC application from Cassini to IIS. It is done very easy, just go to project, Web tab -> Use local IIS Web Server. Select the option and then click on &#8220;Create a virtual directory&#8221;, to create a virtual directory for application.  </p><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_stL4bIIuRUs/TLga9AQeq6I/AAAAAAAAG-g/dRc-bMB-Yzc/s1600/projproperties.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 122px;" src="http://1.bp.blogspot.com/_stL4bIIuRUs/TLga9AQeq6I/AAAAAAAAG-g/dRc-bMB-Yzc/s400/projproperties.png" border="0" alt=""id="BLOGGER_PHOTO_ID_5528198177940745122" /></a> <p>But after I started, application just failed. I&#8217;ll share the problems I met and how I fix them. </p><h2>IIS identity impersonation and path credentials</h2><p>To make sure your SQL database works fine, you have to configure identity impersonation for application pool and path credentials for folder. </p><p>Go to ISS Management, Application Pools, DefaulAppPool, (you could you another app pool for you application), Advanced Settings, Process Model, Identity and set it for your account (you should have admin permissions on this machine). </p><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_stL4bIIuRUs/TLgbJbY04VI/AAAAAAAAG-o/qhDRoBlKCng/s1600/processidentity.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 338px;" src="http://4.bp.blogspot.com/_stL4bIIuRUs/TLgbJbY04VI/AAAAAAAAG-o/qhDRoBlKCng/s400/processidentity.png" border="0" alt=""id="Img1" /></a> <p>Go to Virtual folder, Basic Setting, Connect As&#8230;, use you credentials. </p><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/TLgbRJAUThI/AAAAAAAAG-w/ssQc42zjtgw/s1600/pathcredentials.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 281px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/TLgbRJAUThI/AAAAAAAAG-w/ssQc42zjtgw/s400/pathcredentials.png" border="0" alt=""id="Img2" /></a> <h2>JavaScript references from Master page </h2><p>On my master page I&#8217;ve referenced number of javascript files, as jQuery, jPost etc. I did it like that, </p><blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">&#60;</font><font color="#800000">script</font> <font color="#ff0000">src</font><font color="#0000ff">="/Scripts/jquery-1.4.1.min.js"</font> <font color="#ff0000">type</font><font color="#0000ff">="text/javascript"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">script</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp; <br />
&#60;script src=<font color="#A31515">"/Scripts/jquery.blockUI.js"</font> type=<font color="#A31515">"text/javascript"</font>&#62;&#60;/script&#62;<br />
&#60;script src=<font color="#A31515">"/Scripts/json2.js"</font> type=<font color="#A31515">"text/javascript"</font>&#62;&#60;/script&#62;&nbsp;&nbsp;&nbsp;&nbsp; <br />
&#60;script src=<font color="#A31515">"/Scripts/jquery.postJson.js"</font> type=<font color="#A31515">"text/javascript"</font>&#62;<font color="#0000ff">&#60;/</font><font color="#800000">script</font><font color="#0000ff">&#62;</font><br />
</font><br />
<font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote><p>That worked fine on Cassini, because virtual is &#8220;/&#8221;, but as on IIS if you use code like that, it would have some unexpected behavior. Namely, on each view that uses this Master script reference will be mapped differently. For http://localhost/Tracky/Home, it would be be searching for javascript by such URL http://localhost/Tracky/Home/Scripts/jquery-1.4.1.min. And failed to load that. Fortunately there is a way to fix that. Instead of, </p><blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">&#60;</font><font color="#800000">script</font> <font color="#ff0000">src</font><font color="#0000ff">="/Scripts/jquery-1.4.1.min.js"</font> <font color="#ff0000">type</font><font color="#0000ff">="text/javascript"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">script</font><font color="#0000ff">&#62;</font><br />
</font></code></blockquote><p>Use </p><blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">&#60;</font><font color="#800000">script</font> <font color="#ff0000">src</font><font color="#0000ff">="&#60;%: Url.Content("</font>~/<font color="#ff0000">Scripts</font>/<font color="#ff0000">jquery-1</font>.<font color="#ff0000">4</font>.<font color="#ff0000">1</font>.<font color="#ff0000">min</font>.<font color="#ff0000">js</font><font color="#0000ff">") %&#62;"</font> <font color="#ff0000">type</font><font color="#0000ff">="text/javascript"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">script</font><font color="#0000ff">&#62;</font><br />
</font></code></blockquote><p>Url.Content method will properly create a absolute path to script file. </p><p>Please make sure, that your Master page is inherited from System.Web.Mvc.ViewMasterPage. </p><blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">namespace</font> Web.Areas.Public<br />
{<br />
&nbsp;&nbsp;[CoverageExcludeAttribute]<br />
&nbsp;&nbsp;<font color="#0000ff">public</font> <font color="#0000ff">partial</font> <font color="#0000ff">class</font> Public : System.Web.Mvc.ViewMasterPage <br />
&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">protected</font> <font color="#0000ff">void</font> Page_Load(<font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;}<br />
}</font><br />
<br />
<font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote><p>I&#8217;ve spend some time, trying to understand why <a href="http://stackoverflow.com/questions/3912508/using-url-content-in-asp-net-mvc-2-0">Url.Content does not work for me</a>, thanks to <a href="http://twitter.com/#!/erikzaadi">erikzaadi</a>. </p><h2>All redirected URL have to prefixed with ~/</h2><p>If you have Redirection somewhere, make sure that redirect URL is prefixed with ~/ (except you explicitly mean it). If you do <code>Redirect("/Pubic/Home")</code> from /Public/Registration, for instance, absolute URL will be http://localhost/Tracky/Public/Registration/Public/Home, something not expected. With ~/ it will be correctly redirected to http://localhost/Tracky/Public/Home. </p><h2>Use absolute path for AJAX posts</h2><p>If you somewhere have a javascript code like this: </p><blockquote><code><font size="2" face="Courier New" color="black">$.post('/GetAllTasks/' + userId, null, callback, 'json'); </font></code></blockquote><p>It won&#8217;t work either, you have to provide absolute path for resource. </p><blockquote><code><font size="2" face="Courier New" color="black">$.post(api + '/GetAllTasks/' + userId, null, callback, 'json'); </font></code></blockquote><p>I receive the API folder from a hidden input on page, initialized with a value from ViewData, which in its turn intialized in controller, using <code>VirtualPathUtility</code> class. </p><h2>Conclusions</h2><p>These are just some issues I met during my switching after I done all above application started to work fine. If you had some other issues during transition to IIS, please make you comments. </p><p>You can review changes I did for my project in this <a href="http://github.com/alexanderbeletsky/Trackyourtasks.net/commit/0ddbfb2df4a0148a3d4133e033ec0e084a066bc9">commit</a>. </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/agileee-2010-j-b-rainsberger-integrated.html">
    
      Agileee 2010: J. B. Rainsberger: Integrated Tests are A Scam</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-12T22:33:00+03:00" pubdate data-updated="true">Oct 12<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on Agileee 2010 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_stL4bIIuRUs/TLS4D_xKylI/AAAAAAAAG-Y/3LkvrX1aLik/s1600/DSC03708.JPG"><img style="float:right; margin:0 0 10px 10px;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://4.bp.blogspot.com/_stL4bIIuRUs/TLS4D_xKylI/AAAAAAAAG-Y/3LkvrX1aLik/s400/DSC03708.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5527245021487221330" /></a>
<p>
It a very dramatic beginning - &#8220;Integrated Tests are a scam&#8221;. a self-replicating virus that takes over your project and burdens you with long-running, fragile, hard-to-understand test suites - a sentence JBrains started his speech!
</p>
<h2>What is integrated tests?</h2>
<p>
Integrated tests checks whole system, not only collaboration between some components. It means any tests where the failure of the test with unjustifiable failures. It is bad, because it is a distraction and give no value.
</p> 
<h2>Integrated tests are slow</h2>
<p>
Integrated tests involves DB, network that makes tests are slow. 
</p>
<h2>Integrated tests are brittle</h2>
<p> 
If you change one small thing you have to fix a lot of tests. JBrains gives a very nice and common example. &#8220;Foreign Keys hell&#8221; - you have a foreign keys in DB, so to insert/remove record to one table, you have to insert/remove record to another table.. and so on. Preparation tests data is very expensive operation, complexity goes as exponential form. Eventually it came up that change that took 1.5 hour start to take 1 days.
</p>
<h2>Goal of unit testing</h2>
<p>
Goal of unit testing is to have quick and correct result. Test failure should point to exact problem in object to be tested. In case of integrated tests, it is possible to have multiple failures, with very few actual understanding of what is wrong.
</p>
<h2>What to do?</h2>
<p>
JBrains introduces term of - <em>Collaboration tests</em> (Interaction tests) - using mock objects or tests doubles. Collaboration is observed as Client-Server architecure. The object that is being tested is Client, the object it depends on is Server. We create interfaces, to make it possible to substitute implementation (using test doubles), we simulate behavior for object we testing. Client object is a completely tested, test double simulate behavior of Server. 
</p>
<p>
This is greatly works, tests pass, but we found a problems. The issue is that object doesn&#8217;t always work as it is expected by tests and having Collaboration tests only is not enough. We need another type of test - <em>Contract tests</em>.
</p>
<p>
Contract tests focuses on Server side, this are ones that actually do SQL to DB, requests by network etc. The goal here is to focus on Contract (or interface) of object and test interface, not exact implementation. Since contract tests are defined, now it is possible to reuse them for any particular implementation. As an example, we could review IList class, that could have different implementations (as array list, linked list etc.), but it have one interface with simple operations like - add, remove, at. We create a number of tests, for all contract operations. Such tests could be put to common class, with abstract operation of object creation (template method pattern), so tests of particular implementation (array list for instance) just inherit common class, override creation function to return array list method and reused all already defined contract tests.  
</p>
<h2>What are benefits?</h2>
<p>
Combining these 2 types of tests give us fast, isolated suites, failure is suite should point to exact issue avoiding creation of complex integration tests. 
</p>
<p>
Later on JBrains gives some mathematical proves of differences between number collaboration/contacts tests and integrated tests, that I just do not want to write here, cause afraid to incorrectly interpret the information. The keynote of the speech is rather simple: forget about complex and heavyweight integration tests, do as much as possible with test doubles running everything in memory, do contract testing for platform depended objects. 
</p>
<p>
You could find more, here: <a href="http://blog.jbrains.ca/integrated_tests_are_a_scam">http://blog.jbrains.ca/integrated_tests_are_a_scam</a>
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2010/10/agileee-2010-pawel-lipinski-clean-tests.html">
    
      Agileee 2010: Pawel Lipinski: Clean Tests by Uncle Paul, or How to structure your tests so that they serve you well</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2010-10-10T16:59:00+03:00" pubdate data-updated="true">Oct 10<span>th</span>, 2010</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on Agileee 2010 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/TLHG-CdbcZI/AAAAAAAAG-Q/6lTubX6bNG0/s1600/DSC03703.JPG"><img style="float:right; margin:0 0 10px 10px;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/TLHG-CdbcZI/AAAAAAAAG-Q/6lTubX6bNG0/s400/DSC03703.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5526416986874802578" /></a>
<p>
One of few technical speeches on this conference. <a href="http://pragmatists.pl/en/about_us.php">Pawel</a> discusses a vision of production clean code, with a clean tests as key factor of creation good software. That was very interesting and rather quick, so I did only few notes of it.
</p>
<h2>Introduction</h2>
<p>
&#8220;Most important stuff is to create a clean code - Robert C. Martin (Uncle Bob)&#8221;
</p>
<p>
Writing a clean code is important! Everybody knows that, but not everybody actually produce clean code. Writing a tests is vital to create reliable, maintable, code. It is a common issue of many developers to forget that tests code quality as such important as production code. 
</p>
<p>
Then we do write tests, we have to be sure that we are:
</p>
<ul>
<li>writing tests that are reliable</li>
<li>writing tests that they are document code</li>
<li>writing tests that they are maintainable</li>
<li>writing tests that they are readable</li>
</ul>
<p>
Writing good code/tests is a hard work! That require time and practice.
</p>
<h2>What test do give?</h2>
<p>
We are spending an effort on tests (a lot of efforts, actually). Why do we do that?
</p>
<ul>
<li>Be in safe net, awareness of what you did</li>
<li>TDD leads to a Test driven Design!</li>
<li>TDD increasing development speed</li>
<li>TDD produce documentation</li>
</ul>
<h2>Problems</h2>
<p>
The more tests you have, more problem you have with them. So, at some point of time it stop to be a documentation. 
</p>
<p>
This is especially matters then you have a lot of integration tests, that could affect each other, provide massive failures without giving clear understanding what is wrong. 
</p>
<h2>Process</h2>
<p>
What&#8217;s the process of creation the tests, following TDD rules? 
</p>
<ul>
<li>Think First</li>
<li>Trivial First</li> 
<li>Test specifies &#8220;what&#8221;, implementation says &#8220;how&#8221;</li>
<li>You need different levels of tests (unit, integration, end-to-end)</li>
</ul>
<h2>Conventions</h2>
<p>
Something that helps to produce clean tests. 
</p>
<ul>
<li>Coherent naming of tests classes</li>
<li>Coherent naming of tests</li>
<li>Test classes names focus more on functionality</li>
</ul>
<h2>Comments</h2>
<p>
If you feel you must comment, something wrong with you code. Tests have to be document itself.
</p>
<p>
Some useful //give, //when, //then (//arrange, //act, //assert).
</p>
<h2>Test setup (Given part of test)</h2>
<p>
DRY (Dont repeat yourself) is major. We usually repeat the setup code for each tests. Have to be extracted to methods, that could be easily reused. Method name should reflect its meaning.
</p>
<h2>Behavior Driven Development</h2>
<p>
It is on top of TDD, we define behaviour. It reflects a user stories that business people create. Focuses, why code should exists. Code have to be a value for customer. Naming is important, language you use reflects the way you think. Naming in code is the same as names by the business people. In BDD we say Examples, Not Tests.
</p>
<p>
By the way, someone suggested good BDD tool for .NET, <a href="http://specflow.org/">http://specflow.org/</a>
</p>
<h2>BDD rules</h2>
<ul>
<li>tests names should be sentences</li>
<li>simple constant template of sentence help to focus in the tests on one thing</li>
</ul>
<h2>A-TDD</h2>
<p>
Acceptance TDD. Scenarios have to written by business people (or at least with them nearby).
</p>
<h2>Tests smells</h2>
<p>Factors that shows something is wrong with test</p>
<ul>
<li>Long setup</li>
<li>Long tests</li>
<li>Many assertions</li>
<li>To many tests methods</li>
</ul>
<h2>Maintainable tests</h2>
<p>
Some rules must be followed according to have maintainable tests.
</p>
<ul>
<li>Reuse assertion, create &#8220;business&#8221; assertions</li>
<li>Reuse object construction methods</li>
<li>Reuse test setup</li>
<li>Tests should not depend on environment and order of executions</li>
</ul></div>

      
      
    </div>
  </div>

    </article>
  
  <div class="pagination inner pure-u-1">
    
      <a class="prev" href="/blog/page/16/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/14/">Newer &rarr;</a>
    
  </div>
</div></div>
	<footer class="pure-g-r"><div class="inner pure-u-1">
	<p>
		Theme developed by <a href="https://twitter.com/alexbeletsky">@alexbeletsky</a> | Fonts by <a href="http://www.google.com/fonts/">Google Fonts</a> | Icons by <a href="http://fontello.com/">Fontello</a> | Hosted on <a href="http://github.com">github</a> | Powered by <a href="http://octopress.org/">Octopress</a>
	</p>
	<p>
		Copyright  2010 - 2013 beletsky.net
	</p>
</div>

</footer>
	<div class="buttons">
	


	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


	

</div>
</body>
</html>